generator client {
  provider      = "prisma-client-js"
  output        = "../../../node_modules/@prisma/client"
  binaryTargets = ["native", "linux-musl"]
}

datasource mariasql {
  provider = "mysql"
  url      = env("PACKRAT_DATABASE_URL")
}

model AccessAction {
  idAccessAction             Int                          @id @default(autoincrement())
  Name                       String                       @mariasql.VarChar(255)
  SortOrder                  Int
  AccessRoleAccessActionXref AccessRoleAccessActionXref[]

  @@index([SortOrder], name: "AccessAction_SortOrder")
}

model AccessContext {
  idAccessContext     Int                   @id @default(autoincrement())
  Global              Boolean
  Authoritative       Boolean
  CaptureData         Boolean
  Model               Boolean
  Scene               Boolean
  IntermediaryFile    Boolean
  AccessContextObject AccessContextObject[]
  AccessPolicy        AccessPolicy[]
}

model AccessContextObject {
  idAccessContextObject Int           @id @default(autoincrement())
  idAccessContext       Int
  idSystemObject        Int
  AccessContext         AccessContext @relation(fields: [idAccessContext], references: [idAccessContext])
  SystemObject          SystemObject  @relation(fields: [idSystemObject], references: [idSystemObject])

  @@index([idAccessContext], name: "AccessContextObject_idAccessContext")
  @@index([idSystemObject], name: "AccessContextObject_idSystemObject")
}

model AccessPolicy {
  idAccessPolicy  Int           @id @default(autoincrement())
  idUser          Int
  idAccessRole    Int
  idAccessContext Int
  AccessContext   AccessContext @relation(fields: [idAccessContext], references: [idAccessContext])
  AccessRole      AccessRole    @relation(fields: [idAccessRole], references: [idAccessRole])
  User            User          @relation(fields: [idUser], references: [idUser])

  @@index([idAccessContext], name: "AccessPolicy_idAccessContext")
  @@index([idAccessRole], name: "AccessPolicy_idAccessRole")
  @@index([idUser], name: "AccessPolicy_idUser")
}

model AccessRole {
  idAccessRole               Int                          @id @default(autoincrement())
  Name                       String                       @mariasql.VarChar(255)
  AccessPolicy               AccessPolicy[]
  AccessRoleAccessActionXref AccessRoleAccessActionXref[]
}

model AccessRoleAccessActionXref {
  idAccessRoleAccessActionXref Int          @id @default(autoincrement())
  idAccessRole                 Int
  idAccessAction               Int
  AccessAction                 AccessAction @relation(fields: [idAccessAction], references: [idAccessAction])
  AccessRole                   AccessRole   @relation(fields: [idAccessRole], references: [idAccessRole])

  @@index([idAccessAction], name: "AccessRoleAccessActionXref_idAccessAction")
  @@index([idAccessRole], name: "AccessRoleAccessActionXref_idAccessRole")
}

model Actor {
  idActor               Int                     @id @default(autoincrement())
  IndividualName        String?                 @mariasql.VarChar(255)
  OrganizationName      String?                 @mariasql.VarChar(255)
  idUnit                Int?
  Unit                  Unit?                   @relation(fields: [idUnit], references: [idUnit])
  ModelProcessingAction ModelProcessingAction[]
  SystemObject          SystemObject?

  @@index([idUnit], name: "fk_actor_unit_1")
}

model Asset {
  idAsset                                         Int                  @id @default(autoincrement())
  FileName                                        String               @mariasql.VarChar(512)
  FilePath                                        String               @mariasql.VarChar(512)
  idAssetGroup                                    Int?
  idVAssetType                                    Int
  idSystemObject                                  Int?
  StorageKey                                      String?              @unique @mariasql.VarChar(512)
  AssetGroup                                      AssetGroup?          @relation(fields: [idAssetGroup], references: [idAssetGroup])
  SystemObject_Asset_idSystemObjectToSystemObject SystemObject?        @relation("Asset_idSystemObjectToSystemObject", fields: [idSystemObject], references: [idSystemObject])
  Vocabulary                                      Vocabulary           @relation(fields: [idVAssetType], references: [idVocabulary])
  AssetVersion                                    AssetVersion[]
  CaptureData                                     CaptureData[]
  CaptureDataFile                                 CaptureDataFile[]
  IntermediaryFile                                IntermediaryFile[]
  Item                                            Item[]
  Model                                           Model[]
  ModelMaterialUVMap                              ModelMaterialUVMap[]
  Scene                                           Scene[]
  Subject                                         Subject[]
  SystemObject_AssetToSystemObject_idAsset        SystemObject?        @relation("AssetToSystemObject_idAsset")

  @@index([idAssetGroup], name: "Asset_idAssetGroup")
  @@index([idSystemObject], name: "fk_asset_systemobject1")
  @@index([idVAssetType], name: "fk_asset_vocabulary1")
}

model AssetGroup {
  idAssetGroup Int     @id @default(autoincrement())
  Asset        Asset[]
}

model AssetVersion {
  idAssetVersion                      Int                                   @id @default(autoincrement())
  idAsset                             Int
  Version                             Int
  FileName                            String                                @mariasql.VarChar(512)
  idUserCreator                       Int
  DateCreated                         DateTime                              @mariasql.DateTime(0)
  StorageHash                         String                                @mariasql.VarChar(128)
  StorageSize                         BigInt                                @default(0)
  StorageKeyStaging                   String                                @mariasql.VarChar(512)
  Ingested                            Boolean?
  BulkIngest                          Boolean
  Asset                               Asset                                 @relation(fields: [idAsset], references: [idAsset])
  User                                User                                  @relation(fields: [idUserCreator], references: [idUser])
  Metadata                            Metadata[]
  SystemObject                        SystemObject?
  SystemObjectVersionAssetVersionXref SystemObjectVersionAssetVersionXref[]

  @@index([Ingested, idUserCreator], name: "AssetVersion_Ingested_idUserCreator")
  @@index([StorageHash], name: "AssetVersion_StorageHash")
  @@index([StorageKeyStaging], name: "AssetVersion_StorageKeyStaging")
  @@index([idAsset, Version], name: "AssetVersion_idAsset_Version")
  @@index([idUserCreator, Ingested], name: "AssetVersion_idUserCreator_Ingested")
}

model CaptureData {
  idCaptureData                   Int                               @id @default(autoincrement())
  Name                            String                            @mariasql.VarChar(255)
  idVCaptureMethod                Int
  DateCaptured                    DateTime                          @mariasql.DateTime(0)
  Description                     String                            @mariasql.VarChar(8000)
  idAssetThumbnail                Int?
  Asset                           Asset?                            @relation(fields: [idAssetThumbnail], references: [idAsset])
  Vocabulary                      Vocabulary                        @relation(fields: [idVCaptureMethod], references: [idVocabulary])
  CaptureDataFile                 CaptureDataFile[]
  CaptureDataGroupCaptureDataXref CaptureDataGroupCaptureDataXref[]
  CaptureDataPhoto                CaptureDataPhoto[]
  SystemObject                    SystemObject?

  @@index([idAssetThumbnail], name: "fk_capturedata_asset1")
  @@index([idVCaptureMethod], name: "fk_capturedata_vocabulary1")
}

model CaptureDataFile {
  idCaptureDataFile       Int         @id @default(autoincrement())
  idCaptureData           Int
  idAsset                 Int
  idVVariantType          Int?
  CompressedMultipleFiles Boolean
  Asset                   Asset       @relation(fields: [idAsset], references: [idAsset])
  CaptureData             CaptureData @relation(fields: [idCaptureData], references: [idCaptureData])
  Vocabulary              Vocabulary? @relation(fields: [idVVariantType], references: [idVocabulary])

  @@index([idAsset], name: "CaptureDataFile_idAsset")
  @@index([idCaptureData], name: "CaptureDataFile_idCaptureData")
  @@index([idVVariantType], name: "fk_capturedatafile_vocabulary1")
}

model CaptureDataGroup {
  idCaptureDataGroup              Int                               @id @default(autoincrement())
  CaptureDataGroupCaptureDataXref CaptureDataGroupCaptureDataXref[]
}

model CaptureDataGroupCaptureDataXref {
  idCaptureDataGroupCaptureDataXref Int              @id @default(autoincrement())
  idCaptureDataGroup                Int
  idCaptureData                     Int
  CaptureData                       CaptureData      @relation(fields: [idCaptureData], references: [idCaptureData])
  CaptureDataGroup                  CaptureDataGroup @relation(fields: [idCaptureDataGroup], references: [idCaptureDataGroup])

  @@index([idCaptureData], name: "CaptureDataGroupCaptureDataXref_idCaptureData")
  @@index([idCaptureDataGroup], name: "CaptureDataGroupCaptureDataXref_idCaptureDataGroup")
}

model CaptureDataPhoto {
  idCaptureDataPhoto                                                 Int         @id @default(autoincrement())
  idCaptureData                                                      Int
  idVCaptureDatasetType                                              Int
  CaptureDatasetFieldID                                              Int?
  idVItemPositionType                                                Int?
  ItemPositionFieldID                                                Int?
  ItemArrangementFieldID                                             Int?
  idVFocusType                                                       Int?
  idVLightSourceType                                                 Int?
  idVBackgroundRemovalMethod                                         Int?
  idVClusterType                                                     Int?
  ClusterGeometryFieldID                                             Int?
  CameraSettingsUniform                                              Boolean?
  CaptureData                                                        CaptureData @relation(fields: [idCaptureData], references: [idCaptureData])
  Vocabulary_CaptureDataPhoto_idVBackgroundRemovalMethodToVocabulary Vocabulary? @relation("CaptureDataPhoto_idVBackgroundRemovalMethodToVocabulary", fields: [idVBackgroundRemovalMethod], references: [idVocabulary])
  Vocabulary_CaptureDataPhoto_idVCaptureDatasetTypeToVocabulary      Vocabulary  @relation("CaptureDataPhoto_idVCaptureDatasetTypeToVocabulary", fields: [idVCaptureDatasetType], references: [idVocabulary])
  Vocabulary_CaptureDataPhoto_idVClusterTypeToVocabulary             Vocabulary? @relation("CaptureDataPhoto_idVClusterTypeToVocabulary", fields: [idVClusterType], references: [idVocabulary])
  Vocabulary_CaptureDataPhoto_idVFocusTypeToVocabulary               Vocabulary? @relation("CaptureDataPhoto_idVFocusTypeToVocabulary", fields: [idVFocusType], references: [idVocabulary])
  Vocabulary_CaptureDataPhoto_idVItemPositionTypeToVocabulary        Vocabulary? @relation("CaptureDataPhoto_idVItemPositionTypeToVocabulary", fields: [idVItemPositionType], references: [idVocabulary])
  Vocabulary_CaptureDataPhoto_idVLightSourceTypeToVocabulary         Vocabulary? @relation("CaptureDataPhoto_idVLightSourceTypeToVocabulary", fields: [idVLightSourceType], references: [idVocabulary])

  @@index([idCaptureData], name: "fk_capturedataphoto_capturedata1")
  @@index([idVCaptureDatasetType], name: "fk_capturedataphoto_vocabulary1")
  @@index([idVItemPositionType], name: "fk_capturedataphoto_vocabulary2")
  @@index([idVFocusType], name: "fk_capturedataphoto_vocabulary3")
  @@index([idVLightSourceType], name: "fk_capturedataphoto_vocabulary4")
  @@index([idVBackgroundRemovalMethod], name: "fk_capturedataphoto_vocabulary5")
  @@index([idVClusterType], name: "fk_capturedataphoto_vocabulary6")
}

model GeoLocation {
  idGeoLocation Int       @id @default(autoincrement())
  Latitude      Float?
  Longitude     Float?
  Altitude      Float?
  TS0           Float?
  TS1           Float?
  TS2           Float?
  R0            Float?
  R1            Float?
  R2            Float?
  R3            Float?
  Item          Item[]
  Subject       Subject[]
}

model Identifier {
  idIdentifier      Int           @id @default(autoincrement())
  IdentifierValue   String
  idVIdentifierType Int
  idSystemObject    Int?
  SystemObject      SystemObject? @relation(fields: [idSystemObject], references: [idSystemObject])
  Vocabulary        Vocabulary    @relation(fields: [idVIdentifierType], references: [idVocabulary])
  Subject           Subject[]

  @@index([IdentifierValue], name: "Identifier_IdentifierValue")
  @@index([idSystemObject, idVIdentifierType], name: "Identifier_idSystemObject_idVIdentifierType")
  @@index([idVIdentifierType, IdentifierValue], name: "Identifier_idVIdentifierType_IdentifierValue")
}

model IntermediaryFile {
  idIntermediaryFile Int           @id @default(autoincrement())
  idAsset            Int
  DateCreated        DateTime      @mariasql.DateTime(0)
  Asset              Asset         @relation(fields: [idAsset], references: [idAsset])
  SystemObject       SystemObject?

  @@index([idAsset], name: "fk_intermediaryfile_asset1")
}

model Item {
  idItem           Int           @id @default(autoincrement())
  idAssetThumbnail Int?
  idGeoLocation    Int?
  Name             String        @mariasql.VarChar(255)
  EntireSubject    Boolean
  Asset            Asset?        @relation(fields: [idAssetThumbnail], references: [idAsset])
  GeoLocation      GeoLocation?  @relation(fields: [idGeoLocation], references: [idGeoLocation])
  SystemObject     SystemObject?

  @@index([idAssetThumbnail], name: "fk_item_asset1")
  @@index([idGeoLocation], name: "fk_item_geolocation1")
}

model Job {
  idJob      Int        @id @default(autoincrement())
  idVJobType Int
  Name       String     @mariasql.VarChar(80)
  Status     Int
  Frequency  String?    @mariasql.VarChar(80)
  Vocabulary Vocabulary @relation(fields: [idVJobType], references: [idVocabulary])
  JobRun     JobRun[]

  @@index([Name], name: "Job_Name")
  @@index([Status], name: "Job_Status")
  @@index([idVJobType, idJob], name: "Job_idVJobType_idJob")
}

model JobRun {
  idJobRun      Int            @id @default(autoincrement())
  idJob         Int
  Status        Int
  Result        Boolean?
  DateStart     DateTime?      @mariasql.DateTime(0)
  DateEnd       DateTime?      @mariasql.DateTime(0)
  Configuration String?        @mariasql.Text
  Parameters    String?        @mariasql.Text
  Output        String?        @mariasql.LongText
  Error         String?        @mariasql.Text
  Job           Job            @relation(fields: [idJob], references: [idJob])
  WorkflowStep  WorkflowStep[]

  @@index([Status], name: "JobRun_Status")
  @@index([idJob], name: "JobRun_idJob")
}

model License {
  idLicense         Int                 @id @default(autoincrement())
  Name              String              @mariasql.VarChar(255)
  Description       String              @mariasql.VarChar(8000)
  RestrictLevel     Int
  LicenseAssignment LicenseAssignment[]
}

model LicenseAssignment {
  idLicenseAssignment Int           @id @default(autoincrement())
  idLicense           Int
  idUserCreator       Int?
  DateStart           DateTime?     @mariasql.DateTime(0)
  DateEnd             DateTime?     @mariasql.DateTime(0)
  idSystemObject      Int?
  License             License       @relation(fields: [idLicense], references: [idLicense])
  SystemObject        SystemObject? @relation(fields: [idSystemObject], references: [idSystemObject])
  User                User?         @relation(fields: [idUserCreator], references: [idUser])

  @@index([idSystemObject], name: "LicenseAssignment_idSystemObject")
  @@index([idLicense], name: "fk_licenseassignment_license1")
  @@index([idUserCreator], name: "fk_licenseassignment_user1")
}

model Metadata {
  idMetadata          Int           @id @default(autoincrement())
  Name                String        @mariasql.VarChar(100)
  ValueShort          String?       @mariasql.VarChar(255)
  ValueExtended       String?       @mariasql.LongText
  idUser              Int?
  idVMetadataSource   Int?
  idSystemObject      Int?
  idAssetVersionValue Int?
  AssetVersion        AssetVersion? @relation(fields: [idAssetVersionValue], references: [idAssetVersion])
  SystemObject        SystemObject? @relation(fields: [idSystemObject], references: [idSystemObject])
  User                User?         @relation(fields: [idUser], references: [idUser])
  Vocabulary          Vocabulary?   @relation(fields: [idVMetadataSource], references: [idVocabulary])

  @@index([Name], name: "Metadata_Name")
  @@index([idSystemObject], name: "Metadata_idSystemObject")
  @@index([idAssetVersionValue], name: "fk_metadata_assetversion1")
  @@index([idUser], name: "fk_metadata_user1")
  @@index([idVMetadataSource], name: "fk_metadata_vocabulary1")
}

model Model {
  idModel                                        Int                     @id @default(autoincrement())
  Name                                           String                  @mariasql.VarChar(255)
  DateCreated                                    DateTime                @mariasql.DateTime(0)
  idVCreationMethod                              Int?
  idVModality                                    Int?
  idVUnits                                       Int?
  idVPurpose                                     Int?
  idVFileType                                    Int?
  idAssetThumbnail                               Int?
  CountAnimations                                Int?
  CountCameras                                   Int?
  CountFaces                                     Int?
  CountLights                                    Int?
  CountMaterials                                 Int?
  CountMeshes                                    Int?
  CountVertices                                  Int?
  CountEmbeddedTextures                          Int?
  CountLinkedTextures                            Int?
  FileEncoding                                   String?                 @mariasql.VarChar(40)
  IsDracoCompressed                              Boolean?
  AutomationTag                                  String?                 @mariasql.VarChar(256)
  Asset                                          Asset?                  @relation(fields: [idAssetThumbnail], references: [idAsset])
  Vocabulary_Model_idVCreationMethodToVocabulary Vocabulary?             @relation("Model_idVCreationMethodToVocabulary", fields: [idVCreationMethod], references: [idVocabulary])
  Vocabulary_Model_idVFileTypeToVocabulary       Vocabulary?             @relation("Model_idVFileTypeToVocabulary", fields: [idVFileType], references: [idVocabulary])
  Vocabulary_Model_idVModalityToVocabulary       Vocabulary?             @relation("Model_idVModalityToVocabulary", fields: [idVModality], references: [idVocabulary])
  Vocabulary_Model_idVPurposeToVocabulary        Vocabulary?             @relation("Model_idVPurposeToVocabulary", fields: [idVPurpose], references: [idVocabulary])
  Vocabulary_Model_idVUnitsToVocabulary          Vocabulary?             @relation("Model_idVUnitsToVocabulary", fields: [idVUnits], references: [idVocabulary])
  ModelMaterialUVMap                             ModelMaterialUVMap[]
  ModelObject                                    ModelObject[]
  ModelProcessingAction                          ModelProcessingAction[]
  ModelSceneXref                                 ModelSceneXref[]
  SystemObject                                   SystemObject?

  @@index([idAssetThumbnail], name: "fk_model_asset1")
  @@index([idVCreationMethod], name: "fk_model_vocabulary1")
  @@index([idVModality], name: "fk_model_vocabulary2")
  @@index([idVUnits], name: "fk_model_vocabulary3")
  @@index([idVPurpose], name: "fk_model_vocabulary4")
  @@index([idVFileType], name: "fk_model_vocabulary5")
}

model ModelMaterial {
  idModelMaterial              Int                            @id @default(autoincrement())
  Name                         String?                        @mariasql.VarChar(255)
  ModelMaterialChannel         ModelMaterialChannel[]
  ModelObjectModelMaterialXref ModelObjectModelMaterialXref[]
}

model ModelMaterialChannel {
  idModelMaterialChannel Int                 @id @default(autoincrement())
  idModelMaterial        Int
  idVMaterialType        Int?
  MaterialTypeOther      String?             @mariasql.VarChar(255)
  idModelMaterialUVMap   Int?
  UVMapEmbedded          Boolean?
  ChannelPosition        Int?
  ChannelWidth           Int?
  Scalar1                Float?
  Scalar2                Float?
  Scalar3                Float?
  Scalar4                Float?
  AdditionalAttributes   String?             @mariasql.Text
  ModelMaterial          ModelMaterial       @relation(fields: [idModelMaterial], references: [idModelMaterial])
  ModelMaterialUVMap     ModelMaterialUVMap? @relation(fields: [idModelMaterialUVMap], references: [idModelMaterialUVMap])
  Vocabulary             Vocabulary?         @relation(fields: [idVMaterialType], references: [idVocabulary])

  @@index([idModelMaterial], name: "ModelMaterialChannel_idModelMaterial")
  @@index([idModelMaterialUVMap], name: "fk_modelmaterialchannel_modelmaterialuvmap1")
  @@index([idVMaterialType], name: "fk_modelmaterialchannel_vocabulary1")
}

model ModelMaterialUVMap {
  idModelMaterialUVMap Int                    @id @default(autoincrement())
  idModel              Int
  idAsset              Int
  UVMapEdgeLength      Int
  Asset                Asset                  @relation(fields: [idAsset], references: [idAsset])
  Model                Model                  @relation(fields: [idModel], references: [idModel])
  ModelMaterialChannel ModelMaterialChannel[]

  @@index([idAsset], name: "ModelUVMapFile_idAsset")
  @@index([idModel], name: "ModelUVMapFile_idModel")
}

model ModelObject {
  idModelObject                  Int                            @id @default(autoincrement())
  idModel                        Int
  BoundingBoxP1X                 Float?
  BoundingBoxP1Y                 Float?
  BoundingBoxP1Z                 Float?
  BoundingBoxP2X                 Float?
  BoundingBoxP2Y                 Float?
  BoundingBoxP2Z                 Float?
  CountVertices                  Int?
  CountFaces                     Int?
  CountColorChannels             Int?
  CountTextureCoordinateChannels Int?
  HasBones                       Boolean?
  HasFaceNormals                 Boolean?
  HasTangents                    Boolean?
  HasTextureCoordinates          Boolean?
  HasVertexNormals               Boolean?
  HasVertexColor                 Boolean?
  IsTwoManifoldUnbounded         Boolean?
  IsTwoManifoldBounded           Boolean?
  IsWatertight                   Boolean?
  SelfIntersecting               Boolean?
  Model                          Model                          @relation(fields: [idModel], references: [idModel])
  ModelObjectModelMaterialXref   ModelObjectModelMaterialXref[]

  @@index([idModel], name: "ModelObject_idModel")
}

model ModelObjectModelMaterialXref {
  idModelObjectModelMaterialXref Int           @id @default(autoincrement())
  idModelObject                  Int
  idModelMaterial                Int
  ModelMaterial                  ModelMaterial @relation(fields: [idModelMaterial], references: [idModelMaterial])
  ModelObject                    ModelObject   @relation(fields: [idModelObject], references: [idModelObject])

  @@index([idModelMaterial], name: "ModelObjectModelMaterialXref_idModelMaterial")
  @@index([idModelObject], name: "ModelObjectModelMaterialXref_idModelObject")
}

model ModelProcessingAction {
  idModelProcessingAction   Int                         @id @default(autoincrement())
  idModel                   Int
  idActor                   Int
  DateProcessed             DateTime                    @mariasql.DateTime(0)
  ToolsUsed                 String                      @mariasql.VarChar(1000)
  Description               String                      @mariasql.Text
  Actor                     Actor                       @relation(fields: [idActor], references: [idActor])
  Model                     Model                       @relation(fields: [idModel], references: [idModel])
  ModelProcessingActionStep ModelProcessingActionStep[]

  @@index([idActor], name: "ModelProcessingAction_idActor")
  @@index([idModel], name: "ModelProcessingAction_idModel")
}

model ModelProcessingActionStep {
  idModelProcessingActionStep Int                   @id @default(autoincrement())
  idModelProcessingAction     Int
  idVActionMethod             Int
  Description                 String                @mariasql.Text
  ModelProcessingAction       ModelProcessingAction @relation(fields: [idModelProcessingAction], references: [idModelProcessingAction])
  Vocabulary                  Vocabulary            @relation(fields: [idVActionMethod], references: [idVocabulary])

  @@index([idModelProcessingAction], name: "fk_modelprocessingactionstep_modelprocessingaction1")
  @@index([idVActionMethod], name: "fk_modelprocessingactionstep_vocabulary1")
}

model ModelSceneXref {
  idModelSceneXref Int     @id @default(autoincrement())
  idModel          Int
  idScene          Int
  Name             String? @mariasql.VarChar(100)
  Usage            String? @mariasql.VarChar(100)
  Quality          String? @mariasql.VarChar(100)
  FileSize         BigInt?
  UVResolution     Int?
  BoundingBoxP1X   Float?
  BoundingBoxP1Y   Float?
  BoundingBoxP1Z   Float?
  BoundingBoxP2X   Float?
  BoundingBoxP2Y   Float?
  BoundingBoxP2Z   Float?
  TS0              Float?
  TS1              Float?
  TS2              Float?
  R0               Float?
  R1               Float?
  R2               Float?
  R3               Float?
  Model            Model   @relation(fields: [idModel], references: [idModel])
  Scene            Scene   @relation(fields: [idScene], references: [idScene])

  @@index([idModel], name: "ModelSceneXref_idModel")
  @@index([idScene], name: "ModelSceneXref_idScene")
}

model Project {
  idProject            Int                    @id @default(autoincrement())
  Name                 String                 @mariasql.VarChar(128)
  Description          String?                @mariasql.VarChar(8000)
  ProjectDocumentation ProjectDocumentation[]
  SystemObject         SystemObject?
  Workflow             Workflow[]
}

model ProjectDocumentation {
  idProjectDocumentation Int           @id @default(autoincrement())
  idProject              Int
  Name                   String        @mariasql.VarChar(255)
  Description            String        @mariasql.VarChar(8000)
  Project                Project       @relation(fields: [idProject], references: [idProject])
  SystemObject           SystemObject?

  @@index([idProject], name: "fk_projectdocumentation_project1")
}

model Scene {
  idScene          Int              @id @default(autoincrement())
  Name             String           @mariasql.VarChar(255)
  idAssetThumbnail Int?
  IsOriented       Boolean
  HasBeenQCd       Boolean
  CountScene       Int?
  CountNode        Int?
  CountCamera      Int?
  CountLight       Int?
  CountModel       Int?
  CountMeta        Int?
  CountSetup       Int?
  CountTour        Int?
  Asset            Asset?           @relation(fields: [idAssetThumbnail], references: [idAsset])
  ModelSceneXref   ModelSceneXref[]
  SystemObject     SystemObject?

  @@index([idAssetThumbnail], name: "fk_scene_asset1")
}

model Stakeholder {
  idStakeholder     Int           @id @default(autoincrement())
  IndividualName    String        @mariasql.VarChar(255)
  OrganizationName  String        @mariasql.VarChar(255)
  EmailAddress      String?       @mariasql.VarChar(255)
  PhoneNumberMobile String?       @mariasql.VarChar(32)
  PhoneNumberOffice String?       @mariasql.VarChar(32)
  MailingAddress    String?       @mariasql.VarChar(255)
  SystemObject      SystemObject?
}

model Subject {
  idSubject             Int           @id @default(autoincrement())
  idUnit                Int
  idAssetThumbnail      Int?
  idGeoLocation         Int?
  Name                  String        @mariasql.VarChar(255)
  idIdentifierPreferred Int?
  Asset                 Asset?        @relation(fields: [idAssetThumbnail], references: [idAsset])
  GeoLocation           GeoLocation?  @relation(fields: [idGeoLocation], references: [idGeoLocation])
  Identifier            Identifier?   @relation(fields: [idIdentifierPreferred], references: [idIdentifier])
  Unit                  Unit          @relation(fields: [idUnit], references: [idUnit])
  SystemObject          SystemObject?

  @@index([idAssetThumbnail], name: "fk_subject_asset1")
  @@index([idGeoLocation], name: "fk_subject_geolocation1")
  @@index([idIdentifierPreferred], name: "fk_subject_identifier1")
  @@index([idUnit], name: "fk_subject_unit1")
}

model SystemObject {
  idSystemObject                                                        Int                               @id @default(autoincrement())
  idUnit                                                                Int?                              @unique
  idProject                                                             Int?                              @unique
  idSubject                                                             Int?                              @unique
  idItem                                                                Int?                              @unique
  idCaptureData                                                         Int?                              @unique
  idModel                                                               Int?                              @unique
  idScene                                                               Int?                              @unique
  idIntermediaryFile                                                    Int?                              @unique
  idAsset                                                               Int?                              @unique
  idAssetVersion                                                        Int?                              @unique
  idProjectDocumentation                                                Int?                              @unique
  idActor                                                               Int?                              @unique
  idStakeholder                                                         Int?                              @unique
  Retired                                                               Boolean
  Actor                                                                 Actor?                            @relation(fields: [idActor], references: [idActor])
  Asset_AssetToSystemObject_idAsset                                     Asset?                            @relation("AssetToSystemObject_idAsset", fields: [idAsset], references: [idAsset])
  AssetVersion                                                          AssetVersion?                     @relation(fields: [idAssetVersion], references: [idAssetVersion])
  CaptureData                                                           CaptureData?                      @relation(fields: [idCaptureData], references: [idCaptureData])
  IntermediaryFile                                                      IntermediaryFile?                 @relation(fields: [idIntermediaryFile], references: [idIntermediaryFile])
  Item                                                                  Item?                             @relation(fields: [idItem], references: [idItem])
  Model                                                                 Model?                            @relation(fields: [idModel], references: [idModel])
  Project                                                               Project?                          @relation(fields: [idProject], references: [idProject])
  ProjectDocumentation                                                  ProjectDocumentation?             @relation(fields: [idProjectDocumentation], references: [idProjectDocumentation])
  Scene                                                                 Scene?                            @relation(fields: [idScene], references: [idScene])
  Stakeholder                                                           Stakeholder?                      @relation(fields: [idStakeholder], references: [idStakeholder])
  Subject                                                               Subject?                          @relation(fields: [idSubject], references: [idSubject])
  Unit                                                                  Unit?                             @relation(fields: [idUnit], references: [idUnit])
  AccessContextObject                                                   AccessContextObject[]
  Asset_Asset_idSystemObjectToSystemObject                              Asset[]                           @relation("Asset_idSystemObjectToSystemObject")
  Audit                                                                 Audit[]
  Identifier                                                            Identifier[]
  LicenseAssignment                                                     LicenseAssignment[]
  Metadata                                                              Metadata[]
  SystemObjectVersion                                                   SystemObjectVersion[]
  SystemObjectXref_SystemObjectToSystemObjectXref_idSystemObjectDerived SystemObjectXref[]                @relation("SystemObjectToSystemObjectXref_idSystemObjectDerived")
  SystemObjectXref_SystemObjectToSystemObjectXref_idSystemObjectMaster  SystemObjectXref[]                @relation("SystemObjectToSystemObjectXref_idSystemObjectMaster")
  UserPersonalizationSystemObject                                       UserPersonalizationSystemObject[]
  WorkflowStepSystemObjectXref                                          WorkflowStepSystemObjectXref[]

  @@index([idActor], name: "SystemObject_idActor")
  @@index([idAsset], name: "SystemObject_idAsset")
  @@index([idAssetVersion], name: "SystemObject_idAssetVersion")
  @@index([idCaptureData], name: "SystemObject_idCaptureData")
  @@index([idIntermediaryFile], name: "SystemObject_idIntermediaryFile")
  @@index([idItem], name: "SystemObject_idItem")
  @@index([idModel], name: "SystemObject_idModel")
  @@index([idProject], name: "SystemObject_idProject")
  @@index([idProjectDocumentation], name: "SystemObject_idProjectDocumentation")
  @@index([idScene], name: "SystemObject_idScene")
  @@index([idStakeholder], name: "SystemObject_idStakeholder")
  @@index([idSubject], name: "SystemObject_idSubject")
  @@index([idUnit], name: "SystemObject_idUnit")
}

model SystemObjectVersion {
  idSystemObjectVersion               Int                                   @id @default(autoincrement())
  idSystemObject                      Int
  PublishedState                      Int
  DateCreated                         DateTime                              @mariasql.DateTime(0)
  SystemObject                        SystemObject                          @relation(fields: [idSystemObject], references: [idSystemObject])
  SystemObjectVersionAssetVersionXref SystemObjectVersionAssetVersionXref[]

  @@index([idSystemObject, idSystemObjectVersion], name: "ObjectVersion_idSystemObject_idObjectVersion")
}

model SystemObjectXref {
  idSystemObjectXref                                                Int          @id @default(autoincrement())
  idSystemObjectMaster                                              Int
  idSystemObjectDerived                                             Int
  SystemObject_SystemObjectToSystemObjectXref_idSystemObjectDerived SystemObject @relation("SystemObjectToSystemObjectXref_idSystemObjectDerived", fields: [idSystemObjectDerived], references: [idSystemObject])
  SystemObject_SystemObjectToSystemObjectXref_idSystemObjectMaster  SystemObject @relation("SystemObjectToSystemObjectXref_idSystemObjectMaster", fields: [idSystemObjectMaster], references: [idSystemObject])

  @@index([idSystemObjectDerived], name: "SystemObjectXref_idSystemObjectDerived")
  @@index([idSystemObjectMaster], name: "SystemObjectXref_idSystemObjectMaster")
}

model Unit {
  idUnit       Int           @id @default(autoincrement())
  Name         String        @mariasql.VarChar(255)
  Abbreviation String?       @mariasql.VarChar(20)
  ARKPrefix    String?       @mariasql.VarChar(255)
  Actor        Actor[]
  Subject      Subject[]
  SystemObject SystemObject?
  UnitEdan     UnitEdan[]
}

model UnitEdan {
  idUnitEdan   Int    @id @default(autoincrement())
  idUnit       Int?
  Abbreviation String @unique @mariasql.VarChar(100)
  Unit         Unit?  @relation(fields: [idUnit], references: [idUnit])

  @@index([Abbreviation], name: "UnitEdan_Abbreviation")
  @@index([idUnit], name: "fk_unitedan_idunit")
}

model User {
  idUser                          Int                               @id @default(autoincrement())
  Name                            String                            @mariasql.VarChar(255)
  EmailAddress                    String                            @mariasql.VarChar(255)
  SecurityID                      String                            @mariasql.VarChar(255)
  Active                          Boolean
  DateActivated                   DateTime                          @mariasql.DateTime(0)
  DateDisabled                    DateTime?                         @mariasql.DateTime(0)
  WorkflowNotificationTime        DateTime?                         @mariasql.Time(0)
  EmailSettings                   Int?
  AccessPolicy                    AccessPolicy[]
  AssetVersion                    AssetVersion[]
  Audit                           Audit[]
  LicenseAssignment               LicenseAssignment[]
  Metadata                        Metadata[]
  UserPersonalizationSystemObject UserPersonalizationSystemObject[]
  UserPersonalizationUrl          UserPersonalizationUrl[]
  Workflow                        Workflow[]
  WorkflowStep                    WorkflowStep[]

  @@index([EmailAddress], name: "user_EmailAddress")
}

model UserPersonalizationSystemObject {
  idUserPersonalizationSystemObject Int          @id @default(autoincrement())
  idUser                            Int
  idSystemObject                    Int
  Personalization                   String?      @mariasql.VarChar(8000)
  SystemObject                      SystemObject @relation(fields: [idSystemObject], references: [idSystemObject])
  User                              User         @relation(fields: [idUser], references: [idUser])

  @@index([idUser], name: "UserPersonalizationObject_idUser")
  @@index([idUser, idSystemObject], name: "UserPersonalizationObject_idUser_idSystemObject")
  @@index([idSystemObject], name: "fk_userpersonalizationsystemobject_systemobject1")
}

model UserPersonalizationUrl {
  idUserPersonalizationUrl Int    @id @default(autoincrement())
  idUser                   Int
  URL                      String @mariasql.VarChar(255)
  Personalization          String @mariasql.VarChar(8000)
  User                     User   @relation(fields: [idUser], references: [idUser])

  @@index([idUser, URL], name: "UserPersonalizationUrl_idUser_URL")
}

model Vocabulary {
  idVocabulary                                                             Int                         @id @default(autoincrement())
  idVocabularySet                                                          Int
  SortOrder                                                                Int
  Term                                                                     String                      @mariasql.VarChar(255)
  VocabularySet                                                            VocabularySet               @relation(fields: [idVocabularySet], references: [idVocabularySet])
  Asset                                                                    Asset[]
  CaptureData                                                              CaptureData[]
  CaptureDataFile                                                          CaptureDataFile[]
  CaptureDataPhoto_CaptureDataPhoto_idVBackgroundRemovalMethodToVocabulary CaptureDataPhoto[]          @relation("CaptureDataPhoto_idVBackgroundRemovalMethodToVocabulary")
  CaptureDataPhoto_CaptureDataPhoto_idVCaptureDatasetTypeToVocabulary      CaptureDataPhoto[]          @relation("CaptureDataPhoto_idVCaptureDatasetTypeToVocabulary")
  CaptureDataPhoto_CaptureDataPhoto_idVClusterTypeToVocabulary             CaptureDataPhoto[]          @relation("CaptureDataPhoto_idVClusterTypeToVocabulary")
  CaptureDataPhoto_CaptureDataPhoto_idVFocusTypeToVocabulary               CaptureDataPhoto[]          @relation("CaptureDataPhoto_idVFocusTypeToVocabulary")
  CaptureDataPhoto_CaptureDataPhoto_idVItemPositionTypeToVocabulary        CaptureDataPhoto[]          @relation("CaptureDataPhoto_idVItemPositionTypeToVocabulary")
  CaptureDataPhoto_CaptureDataPhoto_idVLightSourceTypeToVocabulary         CaptureDataPhoto[]          @relation("CaptureDataPhoto_idVLightSourceTypeToVocabulary")
  Identifier                                                               Identifier[]
  Job                                                                      Job[]
  Metadata                                                                 Metadata[]
  Model_Model_idVCreationMethodToVocabulary                                Model[]                     @relation("Model_idVCreationMethodToVocabulary")
  Model_Model_idVFileTypeToVocabulary                                      Model[]                     @relation("Model_idVFileTypeToVocabulary")
  Model_Model_idVModalityToVocabulary                                      Model[]                     @relation("Model_idVModalityToVocabulary")
  Model_Model_idVPurposeToVocabulary                                       Model[]                     @relation("Model_idVPurposeToVocabulary")
  Model_Model_idVUnitsToVocabulary                                         Model[]                     @relation("Model_idVUnitsToVocabulary")
  ModelMaterialChannel                                                     ModelMaterialChannel[]
  ModelProcessingActionStep                                                ModelProcessingActionStep[]
  Workflow                                                                 Workflow[]
  WorkflowStep                                                             WorkflowStep[]

  @@index([idVocabularySet, SortOrder], name: "Vocabulary_idVocabulySet_SortOrder")
}

model VocabularySet {
  idVocabularySet  Int          @id @default(autoincrement())
  Name             String       @mariasql.VarChar(255)
  SystemMaintained Boolean
  Vocabulary       Vocabulary[]
}

model Workflow {
  idWorkflow      Int              @id @default(autoincrement())
  idVWorkflowType Int
  idProject       Int?
  idUserInitiator Int?
  DateInitiated   DateTime         @mariasql.DateTime(0)
  DateUpdated     DateTime         @mariasql.DateTime(0)
  Parameters      String?          @mariasql.Text
  idWorkflowSet   Int?
  Project         Project?         @relation(fields: [idProject], references: [idProject])
  User            User?            @relation(fields: [idUserInitiator], references: [idUser])
  Vocabulary      Vocabulary       @relation(fields: [idVWorkflowType], references: [idVocabulary])
  WorkflowSet     WorkflowSet?     @relation(fields: [idWorkflowSet], references: [idWorkflowSet])
  WorkflowReport  WorkflowReport[]
  WorkflowStep    WorkflowStep[]

  @@index([idProject], name: "Workflow_idProject")
  @@index([idUserInitiator], name: "Workflow_idUserInitiator")
  @@index([idVWorkflowType], name: "fk_workflow_vocabulary1")
  @@index([idWorkflowSet], name: "fk_workflow_workflowset1")
}

model WorkflowStep {
  idWorkflowStep               Int                            @id @default(autoincrement())
  idWorkflow                   Int
  idJobRun                     Int?
  idUserOwner                  Int?
  idVWorkflowStepType          Int
  State                        Int
  DateCreated                  DateTime                       @mariasql.DateTime(0)
  DateCompleted                DateTime?                      @mariasql.DateTime(0)
  JobRun                       JobRun?                        @relation(fields: [idJobRun], references: [idJobRun])
  User                         User?                          @relation(fields: [idUserOwner], references: [idUser])
  Vocabulary                   Vocabulary                     @relation(fields: [idVWorkflowStepType], references: [idVocabulary])
  Workflow                     Workflow                       @relation(fields: [idWorkflow], references: [idWorkflow])
  WorkflowStepSystemObjectXref WorkflowStepSystemObjectXref[]

  @@index([State, idWorkflow], name: "WorkflowStep_State_idWorkflow")
  @@index([idJobRun], name: "WorkflowStep_idJobRun")
  @@index([idUserOwner], name: "WorkflowStep_idUserOwner")
  @@index([idWorkflow, DateCompleted], name: "WorkflowStep_idWorkflow_DateCompleted")
  @@index([idWorkflow, DateCreated], name: "WorkflowStep_idWorkflow_DateCreated")
  @@index([idVWorkflowStepType], name: "fk_workflowstep_vocabulary1")
}

model WorkflowStepSystemObjectXref {
  idWorkflowStepSystemObjectXref Int          @id @default(autoincrement())
  idWorkflowStep                 Int
  idSystemObject                 Int
  Input                          Boolean
  SystemObject                   SystemObject @relation(fields: [idSystemObject], references: [idSystemObject])
  WorkflowStep                   WorkflowStep @relation(fields: [idWorkflowStep], references: [idWorkflowStep])

  @@index([idSystemObject, Input], name: "WorkflowStepSystemObjectXref_idSystemObject_Input")
  @@index([idWorkflowStep, Input], name: "WorkflowStepSystemObjectXref_idWorkflowStep_Input")
}

model Audit {
  idAudit        Int           @id @default(autoincrement())
  idUser         Int?
  AuditDate      DateTime      @mariasql.DateTime(0)
  AuditType      Int
  DBObjectType   Int?
  idDBObject     Int?
  idSystemObject Int?
  Data           String?       @mariasql.LongText
  SystemObject   SystemObject? @relation(fields: [idSystemObject], references: [idSystemObject])
  User           User?         @relation(fields: [idUser], references: [idUser])

  @@index([DBObjectType, idDBObject, AuditDate], name: "Audit_idAsset_DBObjectType_idDBObject_AuditDate")
  @@index([idSystemObject, AuditDate], name: "Audit_idAsset_idSystemObject_AuditDate")
  @@index([idUser, AuditDate], name: "Audit_idAsset_idUser_AuditDate")
}

model SystemObjectVersionAssetVersionXref {
  idSystemObjectVersionAssetVersionXref Int                 @id @default(autoincrement())
  idSystemObjectVersion                 Int
  idAssetVersion                        Int
  AssetVersion                          AssetVersion        @relation(fields: [idAssetVersion], references: [idAssetVersion])
  SystemObjectVersion                   SystemObjectVersion @relation(fields: [idSystemObjectVersion], references: [idSystemObjectVersion])

  @@index([idAssetVersion], name: "fk_systemobjectversionassetversionxref_assetversion")
  @@index([idSystemObjectVersion], name: "fk_systemobjectversionassetversionxref_systemobjectversion")
}

model WorkflowReport {
  idWorkflowReport Int      @id @default(autoincrement())
  idWorkflow       Int
  MimeType         String   @mariasql.VarChar(256)
  Data             String   @mariasql.LongText
  Workflow         Workflow @relation(fields: [idWorkflow], references: [idWorkflow])

  @@index([idWorkflow], name: "fk_workflowreport_workflow1")
}

model WorkflowSet {
  idWorkflowSet Int        @id @default(autoincrement())
  Workflow      Workflow[]
}
