generator client {
  provider      = "prisma-client-js"
  output        = "../../../node_modules/@prisma/client"
  binaryTargets = ["native", "linux-musl"]
}

datasource mariasql {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model AccessAction {
  idAccessAction             Int                          @default(autoincrement()) @id
  Name                       String
  SortOrder                  Int
  AccessRoleAccessActionXref AccessRoleAccessActionXref[]

  @@index([SortOrder], name: "AccessAction_SortOrder")
}

model AccessContext {
  Authoritative       Boolean
  CaptureData         Boolean
  Global              Boolean
  idAccessContext     Int                   @default(autoincrement()) @id
  IntermediaryFile    Boolean
  Model               Boolean
  Scene               Boolean
  AccessContextObject AccessContextObject[]
  AccessPolicy        AccessPolicy[]
}

model AccessContextObject {
  idAccessContext       Int
  idAccessContextObject Int           @default(autoincrement()) @id
  idSystemObject        Int
  AccessContext         AccessContext @relation(fields: [idAccessContext], references: [idAccessContext])
  SystemObject          SystemObject  @relation(fields: [idSystemObject], references: [idSystemObject])

  @@index([idAccessContext], name: "AccessContextObject_idAccessContext")
  @@index([idSystemObject], name: "AccessContextObject_idSystemObject")
}

model AccessPolicy {
  idAccessContext Int
  idAccessPolicy  Int           @default(autoincrement()) @id
  idAccessRole    Int
  idUser          Int
  AccessContext   AccessContext @relation(fields: [idAccessContext], references: [idAccessContext])
  AccessRole      AccessRole    @relation(fields: [idAccessRole], references: [idAccessRole])
  User            User          @relation(fields: [idUser], references: [idUser])

  @@index([idAccessContext], name: "AccessPolicy_idAccessContext")
  @@index([idAccessRole], name: "AccessPolicy_idAccessRole")
  @@index([idUser], name: "AccessPolicy_idUser")
}

model AccessRole {
  idAccessRole               Int                          @default(autoincrement()) @id
  Name                       String
  AccessPolicy               AccessPolicy[]
  AccessRoleAccessActionXref AccessRoleAccessActionXref[]
}

model AccessRoleAccessActionXref {
  idAccessAction               Int
  idAccessRole                 Int
  idAccessRoleAccessActionXref Int          @default(autoincrement()) @id
  AccessAction                 AccessAction @relation(fields: [idAccessAction], references: [idAccessAction])
  AccessRole                   AccessRole   @relation(fields: [idAccessRole], references: [idAccessRole])

  @@index([idAccessAction], name: "AccessRoleAccessActionXref_idAccessAction")
  @@index([idAccessRole], name: "AccessRoleAccessActionXref_idAccessRole")
}

model Actor {
  idActor               Int                     @default(autoincrement()) @id
  idUnit                Int?
  IndividualName        String?
  OrganizationName      String?
  Unit                  Unit?                   @relation(fields: [idUnit], references: [idUnit])
  ModelProcessingAction ModelProcessingAction[]
  SystemObject          SystemObject?

  @@index([idUnit], name: "fk_actor_unit_1")
}

model Asset {
  FileName          String
  FilePath          String
  idAsset           Int                 @default(autoincrement()) @id
  idAssetGroup      Int?
  AssetGroup        AssetGroup?         @relation(fields: [idAssetGroup], references: [idAssetGroup])
  AssetVersion      AssetVersion[]
  CaptureData       CaptureData[]
  CaptureDataFile   CaptureDataFile[]
  IntermediaryFile  IntermediaryFile[]
  Item              Item[]
  Metadata          Metadata[]
  Model             Model[]
  ModelGeometryFile ModelGeometryFile[]
  ModelUVMapFile    ModelUVMapFile[]
  Scene             Scene[]
  Subject           Subject[]
  SystemObject      SystemObject?

  @@index([idAssetGroup], name: "Asset_idAssetGroup")
}

model AssetGroup {
  idAssetGroup Int     @default(autoincrement()) @id
  Asset        Asset[]
}

model AssetVersion {
  DateCreated     DateTime
  idAsset         Int
  idAssetVersion  Int           @default(autoincrement()) @id
  idUserCreator   Int
  StorageChecksum String
  StorageLocation String
  StorageSize     Int           @default(0)
  Asset           Asset         @relation(fields: [idAsset], references: [idAsset])
  User            User          @relation(fields: [idUserCreator], references: [idUser])
  SystemObject    SystemObject?

  @@index([idAsset, DateCreated], name: "AssetVersion_idAsset_DateCreated")
  @@index([idUserCreator], name: "fk_assetversion_user1")
}

model CaptureData {
  CameraSettingsUniform                                         Boolean?
  CaptureDatasetFieldID                                         Int?
  ClusterGeometryFieldID                                        Int?
  DateCaptured                                                  DateTime
  Description                                                   String
  idAssetThumbnail                                              Int?
  idCaptureData                                                 Int                               @default(autoincrement()) @id
  idVBackgroundRemovalMethod                                    Int?
  idVCaptureDatasetType                                         Int
  idVCaptureMethod                                              Int
  idVClusterType                                                Int?
  idVFocusType                                                  Int?
  idVItemPositionType                                           Int?
  idVLightSourceType                                            Int?
  ItemArrangementFieldID                                        Int?
  ItemPositionFieldID                                           Int?
  Asset                                                         Asset?                            @relation(fields: [idAssetThumbnail], references: [idAsset])
  Vocabulary_CaptureData_idVBackgroundRemovalMethodToVocabulary Vocabulary?                       @relation("CaptureData_idVBackgroundRemovalMethodToVocabulary", fields: [idVBackgroundRemovalMethod], references: [idVocabulary])
  Vocabulary_CaptureData_idVCaptureDatasetTypeToVocabulary      Vocabulary                        @relation("CaptureData_idVCaptureDatasetTypeToVocabulary", fields: [idVCaptureDatasetType], references: [idVocabulary])
  Vocabulary_CaptureData_idVCaptureMethodToVocabulary           Vocabulary                        @relation("CaptureData_idVCaptureMethodToVocabulary", fields: [idVCaptureMethod], references: [idVocabulary])
  Vocabulary_CaptureData_idVClusterTypeToVocabulary             Vocabulary?                       @relation("CaptureData_idVClusterTypeToVocabulary", fields: [idVClusterType], references: [idVocabulary])
  Vocabulary_CaptureData_idVFocusTypeToVocabulary               Vocabulary?                       @relation("CaptureData_idVFocusTypeToVocabulary", fields: [idVFocusType], references: [idVocabulary])
  Vocabulary_CaptureData_idVItemPositionTypeToVocabulary        Vocabulary?                       @relation("CaptureData_idVItemPositionTypeToVocabulary", fields: [idVItemPositionType], references: [idVocabulary])
  Vocabulary_CaptureData_idVLightSourceTypeToVocabulary         Vocabulary?                       @relation("CaptureData_idVLightSourceTypeToVocabulary", fields: [idVLightSourceType], references: [idVocabulary])
  CaptureDataFile                                               CaptureDataFile[]
  CaptureDataGroupCaptureDataXref                               CaptureDataGroupCaptureDataXref[]
  SystemObject                                                  SystemObject?

  @@index([idAssetThumbnail], name: "fk_capturedata_asset1")
  @@index([idVCaptureMethod], name: "fk_capturedata_vocabulary1")
  @@index([idVCaptureDatasetType], name: "fk_capturedata_vocabulary2")
  @@index([idVItemPositionType], name: "fk_capturedata_vocabulary3")
  @@index([idVFocusType], name: "fk_capturedata_vocabulary4")
  @@index([idVLightSourceType], name: "fk_capturedata_vocabulary5")
  @@index([idVBackgroundRemovalMethod], name: "fk_capturedata_vocabulary6")
  @@index([idVClusterType], name: "fk_capturedata_vocabulary7")
}

model CaptureDataFile {
  CompressedMultipleFiles Boolean
  idAsset                 Int
  idCaptureData           Int
  idCaptureDataFile       Int         @default(autoincrement()) @id
  idVVariantType          Int
  Asset                   Asset       @relation(fields: [idAsset], references: [idAsset])
  CaptureData             CaptureData @relation(fields: [idCaptureData], references: [idCaptureData])
  Vocabulary              Vocabulary  @relation(fields: [idVVariantType], references: [idVocabulary])

  @@index([idAsset], name: "CaptureDataFile_idAsset")
  @@index([idCaptureData], name: "CaptureDataFile_idCaptureData")
  @@index([idVVariantType], name: "fk_capturedatafile_vocabulary1")
}

model CaptureDataGroup {
  idCaptureDataGroup              Int                               @default(autoincrement()) @id
  CaptureDataGroupCaptureDataXref CaptureDataGroupCaptureDataXref[]
}

model CaptureDataGroupCaptureDataXref {
  idCaptureData                     Int
  idCaptureDataGroup                Int
  idCaptureDataGroupCaptureDataXref Int              @default(autoincrement()) @id
  CaptureData                       CaptureData      @relation(fields: [idCaptureData], references: [idCaptureData])
  CaptureDataGroup                  CaptureDataGroup @relation(fields: [idCaptureDataGroup], references: [idCaptureDataGroup])

  @@index([idCaptureData], name: "CaptureDataGroupCaptureDataXref_idCaptureData")
  @@index([idCaptureDataGroup], name: "CaptureDataGroupCaptureDataXref_idCaptureDataGroup")
}

model GeoLocation {
  Altitude      Float?
  idGeoLocation Int       @default(autoincrement()) @id
  Latitude      Float?
  Longitude     Float?
  R0            Float?
  R1            Float?
  R2            Float?
  R3            Float?
  TS0           Float?
  TS1           Float?
  TS2           Float?
  Item          Item[]
  Subject       Subject[]
}

model Identifier {
  IdentifierValue   String
  idIdentifier      Int           @default(autoincrement()) @id
  idSystemObject    Int?
  idVIdentifierType Int
  SystemObject      SystemObject? @relation(fields: [idSystemObject], references: [idSystemObject])
  Vocabulary        Vocabulary    @relation(fields: [idVIdentifierType], references: [idVocabulary])

  @@index([IdentifierValue], name: "Identifier_IdentifierValue")
  @@index([idSystemObject, idVIdentifierType], name: "Identifier_idSystemObject_idVIdentifierType")
  @@index([idVIdentifierType, IdentifierValue], name: "Identifier_idVIdentifierType_IdentifierValue")
}

model IntermediaryFile {
  DateCreated        DateTime
  idAsset            Int
  idIntermediaryFile Int           @default(autoincrement()) @id
  Asset              Asset         @relation(fields: [idAsset], references: [idAsset])
  SystemObject       SystemObject?

  @@index([idAsset], name: "fk_intermediaryfile_asset1")
}

model Item {
  EntireSubject    Boolean
  idAssetThumbnail Int?
  idGeoLocation    Int?
  idItem           Int           @default(autoincrement()) @id
  idSubject        Int
  Name             String
  Asset            Asset?        @relation(fields: [idAssetThumbnail], references: [idAsset])
  GeoLocation      GeoLocation?  @relation(fields: [idGeoLocation], references: [idGeoLocation])
  Subject          Subject       @relation(fields: [idSubject], references: [idSubject])
  SystemObject     SystemObject?

  @@index([idAssetThumbnail], name: "fk_item_asset1")
  @@index([idGeoLocation], name: "fk_item_geolocation1")
  @@index([idSubject], name: "fk_item_subject1")
}

model License {
  Description       String
  idLicense         Int                 @default(autoincrement()) @id
  Name              String
  LicenseAssignment LicenseAssignment[]
}

model LicenseAssignment {
  DateEnd             DateTime?
  DateStart           DateTime?
  idLicense           Int
  idLicenseAssignment Int           @default(autoincrement()) @id
  idSystemObject      Int?
  idUserCreator       Int?
  License             License       @relation(fields: [idLicense], references: [idLicense])
  SystemObject        SystemObject? @relation(fields: [idSystemObject], references: [idSystemObject])
  User                User?         @relation(fields: [idUserCreator], references: [idUser])

  @@index([idSystemObject], name: "LicenseAssignment_idSystemObject")
  @@index([idLicense], name: "fk_licenseassignment_license1")
  @@index([idUserCreator], name: "fk_licenseassignment_user1")
}

model Metadata {
  idAssetValue      Int?
  idMetadata        Int           @default(autoincrement()) @id
  idSystemObject    Int?
  idUser            Int?
  idVMetadataSource Int?
  Name              String
  ValueExtended     String?
  ValueShort        String?
  Asset             Asset?        @relation(fields: [idAssetValue], references: [idAsset])
  SystemObject      SystemObject? @relation(fields: [idSystemObject], references: [idSystemObject])
  User              User?         @relation(fields: [idUser], references: [idUser])
  Vocabulary        Vocabulary?   @relation(fields: [idVMetadataSource], references: [idVocabulary])

  @@index([Name, ValueShort], name: "Metadata_Name_ValueShort")
  @@index([idAssetValue], name: "Metadata_idAssetValue")
  @@index([idSystemObject], name: "Metadata_idSystemObject")
  @@index([idUser], name: "fk_metadata_user1")
  @@index([idVMetadataSource], name: "fk_metadata_vocabulary1")
}

model Model {
  Authoritative                                  Boolean
  DateCreated                                    DateTime
  idAssetThumbnail                               Int?
  idModel                                        Int                     @default(autoincrement()) @id
  idVCreationMethod                              Int
  idVModality                                    Int
  idVPurpose                                     Int
  idVUnits                                       Int
  Master                                         Boolean
  Asset                                          Asset?                  @relation(fields: [idAssetThumbnail], references: [idAsset])
  Vocabulary_Model_idVCreationMethodToVocabulary Vocabulary              @relation("Model_idVCreationMethodToVocabulary", fields: [idVCreationMethod], references: [idVocabulary])
  Vocabulary_Model_idVModalityToVocabulary       Vocabulary              @relation("Model_idVModalityToVocabulary", fields: [idVModality], references: [idVocabulary])
  Vocabulary_Model_idVPurposeToVocabulary        Vocabulary              @relation("Model_idVPurposeToVocabulary", fields: [idVPurpose], references: [idVocabulary])
  Vocabulary_Model_idVUnitsToVocabulary          Vocabulary              @relation("Model_idVUnitsToVocabulary", fields: [idVUnits], references: [idVocabulary])
  ModelGeometryFile                              ModelGeometryFile[]
  ModelProcessingAction                          ModelProcessingAction[]
  ModelSceneXref                                 ModelSceneXref[]
  SystemObject                                   SystemObject?

  @@index([idAssetThumbnail], name: "fk_model_asset1")
  @@index([idVCreationMethod], name: "fk_model_vocabulary1")
  @@index([idVModality], name: "fk_model_vocabulary2")
  @@index([idVUnits], name: "fk_model_vocabulary3")
  @@index([idVPurpose], name: "fk_model_vocabulary4")
}

model ModelGeometryFile {
  BoundingBoxP1X      Float?
  BoundingBoxP1Y      Float?
  BoundingBoxP1Z      Float?
  BoundingBoxP2X      Float?
  BoundingBoxP2Y      Float?
  BoundingBoxP2Z      Float?
  FaceCount           Int?
  HasNormals          Boolean?
  HasUVSpace          Boolean?
  HasVertexColor      Boolean?
  idAsset             Int
  idModel             Int
  idModelGeometryFile Int              @default(autoincrement()) @id
  idVModelFileType    Int
  IsWatertight        Boolean?
  Metalness           Float?
  PointCount          Int?
  Roughness           Float?
  Asset               Asset            @relation(fields: [idAsset], references: [idAsset])
  Model               Model            @relation(fields: [idModel], references: [idModel])
  Vocabulary          Vocabulary       @relation(fields: [idVModelFileType], references: [idVocabulary])
  ModelUVMapFile      ModelUVMapFile[]

  @@index([idAsset], name: "ModelGeometryFile_idAsset")
  @@index([idModel], name: "ModelGeometryFile_idModel")
  @@index([idVModelFileType], name: "fk_modelgeometryfile_vocabulary1")
}

model ModelProcessingAction {
  DateProcessed             DateTime
  Description               String
  idActor                   Int
  idModel                   Int
  idModelProcessingAction   Int                         @default(autoincrement()) @id
  ToolsUsed                 String
  Actor                     Actor                       @relation(fields: [idActor], references: [idActor])
  Model                     Model                       @relation(fields: [idModel], references: [idModel])
  ModelProcessingActionStep ModelProcessingActionStep[]

  @@index([idActor], name: "ModelProcessingAction_idActor")
  @@index([idModel], name: "ModelProcessingAction_idModel")
}

model ModelProcessingActionStep {
  Description                 String
  idModelProcessingAction     Int
  idModelProcessingActionStep Int                   @default(autoincrement()) @id
  idVActionMethod             Int
  ModelProcessingAction       ModelProcessingAction @relation(fields: [idModelProcessingAction], references: [idModelProcessingAction])
  Vocabulary                  Vocabulary            @relation(fields: [idVActionMethod], references: [idVocabulary])

  @@index([idModelProcessingAction], name: "fk_modelprocessingactionstep_modelprocessingaction1")
  @@index([idVActionMethod], name: "fk_modelprocessingactionstep_vocabulary1")
}

model ModelSceneXref {
  idModel          Int
  idModelSceneXref Int    @default(autoincrement()) @id
  idScene          Int
  R0               Float?
  R1               Float?
  R2               Float?
  R3               Float?
  TS0              Float?
  TS1              Float?
  TS2              Float?
  Model            Model  @relation(fields: [idModel], references: [idModel])
  Scene            Scene  @relation(fields: [idScene], references: [idScene])

  @@index([idModel], name: "ModelSceneXref_idModel")
  @@index([idScene], name: "ModelSceneXref_idScene")
}

model ModelUVMapChannel {
  ChannelPosition     Int
  ChannelWidth        Int
  idModelUVMapChannel Int            @default(autoincrement()) @id
  idModelUVMapFile    Int
  idVUVMapType        Int
  ModelUVMapFile      ModelUVMapFile @relation(fields: [idModelUVMapFile], references: [idModelUVMapFile])
  Vocabulary          Vocabulary     @relation(fields: [idVUVMapType], references: [idVocabulary])

  @@index([idModelUVMapFile], name: "ModelUVMapChannel_idModelUVMapFile")
  @@index([idVUVMapType], name: "fk_modeluvmapchannel_vocabulary1")
}

model ModelUVMapFile {
  idAsset             Int
  idModelGeometryFile Int
  idModelUVMapFile    Int                 @default(autoincrement()) @id
  UVMapEdgeLength     Int
  Asset               Asset               @relation(fields: [idAsset], references: [idAsset])
  ModelGeometryFile   ModelGeometryFile   @relation(fields: [idModelGeometryFile], references: [idModelGeometryFile])
  ModelUVMapChannel   ModelUVMapChannel[]

  @@index([idAsset], name: "ModelUVMapFile_idAsset")
  @@index([idModelGeometryFile], name: "ModelUVMapFile_idModelGeometryFile")
}

model Project {
  Description          String?
  idProject            Int                    @default(autoincrement()) @id
  Name                 String
  ProjectDocumentation ProjectDocumentation[]
  SystemObject         SystemObject?
  Workflow             Workflow[]
}

model ProjectDocumentation {
  Description            String
  idProject              Int
  idProjectDocumentation Int           @default(autoincrement()) @id
  Name                   String
  Project                Project       @relation(fields: [idProject], references: [idProject])
  SystemObject           SystemObject?

  @@index([idProject], name: "fk_projectdocumentation_project1")
}

model Scene {
  HasBeenQCd       Boolean
  idAssetThumbnail Int?
  idScene          Int              @default(autoincrement()) @id
  IsOriented       Boolean
  Name             String
  Asset            Asset?           @relation(fields: [idAssetThumbnail], references: [idAsset])
  ModelSceneXref   ModelSceneXref[]
  SystemObject     SystemObject?

  @@index([idAssetThumbnail], name: "fk_scene_asset1")
}

model Stakeholder {
  EmailAddress      String?
  idStakeholder     Int           @default(autoincrement()) @id
  IndividualName    String
  MailingAddress    String?
  OrganizationName  String
  PhoneNumberMobile String?
  PhoneNumberOffice String?
  SystemObject      SystemObject?
}

model Subject {
  idAssetThumbnail Int?
  idGeoLocation    Int?
  idSubject        Int           @default(autoincrement()) @id
  idUnit           Int
  Name             String
  Asset            Asset?        @relation(fields: [idAssetThumbnail], references: [idAsset])
  GeoLocation      GeoLocation?  @relation(fields: [idGeoLocation], references: [idGeoLocation])
  Unit             Unit          @relation(fields: [idUnit], references: [idUnit])
  Item             Item[]
  SystemObject     SystemObject?

  @@index([idAssetThumbnail], name: "fk_subject_asset1")
  @@index([idGeoLocation], name: "fk_subject_geolocation1")
  @@index([idUnit], name: "fk_subject_unit1")
}

model SystemObject {
  idActor                                                               Int?                              @unique
  idAsset                                                               Int?                              @unique
  idAssetVersion                                                        Int?                              @unique
  idCaptureData                                                         Int?                              @unique
  idIntermediaryFile                                                    Int?                              @unique
  idItem                                                                Int?                              @unique
  idModel                                                               Int?                              @unique
  idProject                                                             Int?                              @unique
  idProjectDocumentation                                                Int?                              @unique
  idScene                                                               Int?                              @unique
  idStakeholder                                                         Int?                              @unique
  idSubject                                                             Int?                              @unique
  idSystemObject                                                        Int                               @default(autoincrement()) @id
  idUnit                                                                Int?                              @unique
  idWorkflow                                                            Int?                              @unique
  idWorkflowStep                                                        Int?                              @unique
  Retired                                                               Boolean
  Actor                                                                 Actor?                            @relation(fields: [idActor], references: [idActor])
  Asset                                                                 Asset?                            @relation(fields: [idAsset], references: [idAsset])
  AssetVersion                                                          AssetVersion?                     @relation(fields: [idAssetVersion], references: [idAssetVersion])
  CaptureData                                                           CaptureData?                      @relation(fields: [idCaptureData], references: [idCaptureData])
  IntermediaryFile                                                      IntermediaryFile?                 @relation(fields: [idIntermediaryFile], references: [idIntermediaryFile])
  Item                                                                  Item?                             @relation(fields: [idItem], references: [idItem])
  Model                                                                 Model?                            @relation(fields: [idModel], references: [idModel])
  Project                                                               Project?                          @relation(fields: [idProject], references: [idProject])
  ProjectDocumentation                                                  ProjectDocumentation?             @relation(fields: [idProjectDocumentation], references: [idProjectDocumentation])
  Scene                                                                 Scene?                            @relation(fields: [idScene], references: [idScene])
  Stakeholder                                                           Stakeholder?                      @relation(fields: [idStakeholder], references: [idStakeholder])
  Subject                                                               Subject?                          @relation(fields: [idSubject], references: [idSubject])
  Unit                                                                  Unit?                             @relation(fields: [idUnit], references: [idUnit])
  Workflow                                                              Workflow?                         @relation(fields: [idWorkflow], references: [idWorkflow])
  WorkflowStep                                                          WorkflowStep?                     @relation(fields: [idWorkflowStep], references: [idWorkflowStep])
  AccessContextObject                                                   AccessContextObject[]
  Identifier                                                            Identifier[]
  LicenseAssignment                                                     LicenseAssignment[]
  Metadata                                                              Metadata[]
  SystemObjectVersion                                                   SystemObjectVersion[]
  SystemObjectXref_SystemObjectToSystemObjectXref_idSystemObjectDerived SystemObjectXref[]                @relation("SystemObjectToSystemObjectXref_idSystemObjectDerived")
  SystemObjectXref_SystemObjectToSystemObjectXref_idSystemObjectMaster  SystemObjectXref[]                @relation("SystemObjectToSystemObjectXref_idSystemObjectMaster")
  UserPersonalizationSystemObject                                       UserPersonalizationSystemObject[]
  WorkflowStepSystemObjectXref                                          WorkflowStepSystemObjectXref[]

  @@index([idActor], name: "SystemObject_idActor")
  @@index([idAsset], name: "SystemObject_idAsset")
  @@index([idAssetVersion], name: "SystemObject_idAssetVersion")
  @@index([idCaptureData], name: "SystemObject_idCaptureData")
  @@index([idIntermediaryFile], name: "SystemObject_idIntermediaryFile")
  @@index([idItem], name: "SystemObject_idItem")
  @@index([idModel], name: "SystemObject_idModel")
  @@index([idProject], name: "SystemObject_idProject")
  @@index([idProjectDocumentation], name: "SystemObject_idProjectDocumentation")
  @@index([idScene], name: "SystemObject_idScene")
  @@index([idStakeholder], name: "SystemObject_idStakeholder")
  @@index([idSubject], name: "SystemObject_idSubject")
  @@index([idUnit], name: "SystemObject_idUnit")
  @@index([idWorkflow], name: "SystemObject_idWorkflow")
  @@index([idWorkflowStep], name: "SystemObject_idWorkflowStep")
}

model SystemObjectVersion {
  idSystemObject        Int
  idSystemObjectVersion Int          @default(autoincrement()) @id
  PublishedState        Int
  SystemObject          SystemObject @relation(fields: [idSystemObject], references: [idSystemObject])

  @@index([idSystemObject, idSystemObjectVersion], name: "ObjectVersion_idSystemObject_idObjectVersion")
}

model SystemObjectXref {
  idSystemObjectDerived                                             Int
  idSystemObjectMaster                                              Int
  idSystemObjectXref                                                Int          @default(autoincrement()) @id
  SystemObject_SystemObjectToSystemObjectXref_idSystemObjectDerived SystemObject @relation("SystemObjectToSystemObjectXref_idSystemObjectDerived", fields: [idSystemObjectDerived], references: [idSystemObject])
  SystemObject_SystemObjectToSystemObjectXref_idSystemObjectMaster  SystemObject @relation("SystemObjectToSystemObjectXref_idSystemObjectMaster", fields: [idSystemObjectMaster], references: [idSystemObject])

  @@index([idSystemObjectDerived], name: "SystemObjectXref_idSystemObjectDerived")
  @@index([idSystemObjectMaster], name: "SystemObjectXref_idSystemObjectMaster")
}

model Unit {
  Abbreviation String?
  ARKPrefix    String?
  idUnit       Int           @default(autoincrement()) @id
  Name         String
  Actor        Actor[]
  Subject      Subject[]
  SystemObject SystemObject?
}

model User {
  Active                          Boolean
  DateActivated                   DateTime
  DateDisabled                    DateTime?
  EmailAddress                    String
  EmailSettings                   Int?
  idUser                          Int                               @default(autoincrement()) @id
  Name                            String
  SecurityID                      String
  WorkflowNotificationTime        DateTime?
  AccessPolicy                    AccessPolicy[]
  AssetVersion                    AssetVersion[]
  LicenseAssignment               LicenseAssignment[]
  Metadata                        Metadata[]
  UserPersonalizationSystemObject UserPersonalizationSystemObject[]
  UserPersonalizationUrl          UserPersonalizationUrl[]
  Workflow                        Workflow[]
  WorkflowStep                    WorkflowStep[]
}

model UserPersonalizationSystemObject {
  idSystemObject                    Int
  idUser                            Int
  idUserPersonalizationSystemObject Int          @default(autoincrement()) @id
  Personalization                   String?
  SystemObject                      SystemObject @relation(fields: [idSystemObject], references: [idSystemObject])
  User                              User         @relation(fields: [idUser], references: [idUser])

  @@index([idUser], name: "UserPersonalizationObject_idUser")
  @@index([idUser, idSystemObject], name: "UserPersonalizationObject_idUser_idSystemObject")
  @@index([idSystemObject], name: "fk_userpersonalizationsystemobject_systemobject1")
}

model UserPersonalizationUrl {
  idUser                   Int
  idUserPersonalizationUrl Int    @default(autoincrement()) @id
  Personalization          String
  URL                      String
  User                     User   @relation(fields: [idUser], references: [idUser])

  @@index([idUser, URL], name: "UserPersonalizationUrl_idUser_URL")
}

model Vocabulary {
  idVocabulary                                                   Int                         @default(autoincrement()) @id
  idVocabularySet                                                Int
  SortOrder                                                      Int
  VocabularySet                                                  VocabularySet               @relation(fields: [idVocabularySet], references: [idVocabularySet])
  CaptureData_CaptureData_idVBackgroundRemovalMethodToVocabulary CaptureData[]               @relation("CaptureData_idVBackgroundRemovalMethodToVocabulary")
  CaptureData_CaptureData_idVCaptureDatasetTypeToVocabulary      CaptureData[]               @relation("CaptureData_idVCaptureDatasetTypeToVocabulary")
  CaptureData_CaptureData_idVCaptureMethodToVocabulary           CaptureData[]               @relation("CaptureData_idVCaptureMethodToVocabulary")
  CaptureData_CaptureData_idVClusterTypeToVocabulary             CaptureData[]               @relation("CaptureData_idVClusterTypeToVocabulary")
  CaptureData_CaptureData_idVFocusTypeToVocabulary               CaptureData[]               @relation("CaptureData_idVFocusTypeToVocabulary")
  CaptureData_CaptureData_idVItemPositionTypeToVocabulary        CaptureData[]               @relation("CaptureData_idVItemPositionTypeToVocabulary")
  CaptureData_CaptureData_idVLightSourceTypeToVocabulary         CaptureData[]               @relation("CaptureData_idVLightSourceTypeToVocabulary")
  CaptureDataFile                                                CaptureDataFile[]
  Identifier                                                     Identifier[]
  Metadata                                                       Metadata[]
  Model_Model_idVCreationMethodToVocabulary                      Model[]                     @relation("Model_idVCreationMethodToVocabulary")
  Model_Model_idVModalityToVocabulary                            Model[]                     @relation("Model_idVModalityToVocabulary")
  Model_Model_idVPurposeToVocabulary                             Model[]                     @relation("Model_idVPurposeToVocabulary")
  Model_Model_idVUnitsToVocabulary                               Model[]                     @relation("Model_idVUnitsToVocabulary")
  ModelGeometryFile                                              ModelGeometryFile[]
  ModelProcessingActionStep                                      ModelProcessingActionStep[]
  ModelUVMapChannel                                              ModelUVMapChannel[]
  WorkflowStep                                                   WorkflowStep[]

  @@index([idVocabularySet, SortOrder], name: "Vocabulary_idVocabulySet_SortOrder")
}

model VocabularySet {
  idVocabularySet  Int          @default(autoincrement()) @id
  Name             String
  SystemMaintained Boolean
  Vocabulary       Vocabulary[]
}

model Workflow {
  DateInitiated      DateTime
  DateUpdated        DateTime
  idProject          Int?
  idUserInitiator    Int?
  idWorkflow         Int              @default(autoincrement()) @id
  idWorkflowTemplate Int
  Project            Project?         @relation(fields: [idProject], references: [idProject])
  User               User?            @relation(fields: [idUserInitiator], references: [idUser])
  WorkflowTemplate   WorkflowTemplate @relation(fields: [idWorkflowTemplate], references: [idWorkflowTemplate])
  SystemObject       SystemObject?
  WorkflowStep       WorkflowStep[]

  @@index([idProject], name: "Workflow_idProject")
  @@index([idUserInitiator], name: "Workflow_idUserInitiator")
  @@index([idWorkflowTemplate], name: "fk_workflow_workflowtemplate1")
}

model WorkflowStep {
  DateCompleted                DateTime?
  DateCreated                  DateTime
  idUserOwner                  Int
  idVWorkflowStepType          Int
  idWorkflow                   Int
  idWorkflowStep               Int                            @default(autoincrement()) @id
  State                        Int
  User                         User                           @relation(fields: [idUserOwner], references: [idUser])
  Vocabulary                   Vocabulary                     @relation(fields: [idVWorkflowStepType], references: [idVocabulary])
  Workflow                     Workflow                       @relation(fields: [idWorkflow], references: [idWorkflow])
  SystemObject                 SystemObject?
  WorkflowStepSystemObjectXref WorkflowStepSystemObjectXref[]

  @@index([State, idWorkflow], name: "WorkflowStep_State_idWorkflow")
  @@index([idUserOwner], name: "WorkflowStep_idUserOwner")
  @@index([idWorkflow, DateCompleted], name: "WorkflowStep_idWorkflow_DateCompleted")
  @@index([idWorkflow, DateCreated], name: "WorkflowStep_idWorkflow_DateCreated")
  @@index([idVWorkflowStepType], name: "fk_workflowstep_vocabulary1")
}

model WorkflowStepSystemObjectXref {
  idSystemObject                 Int
  idWorkflowStep                 Int
  idWorkflowStepSystemObjectXref Int          @default(autoincrement()) @id
  Input                          Boolean
  SystemObject                   SystemObject @relation(fields: [idSystemObject], references: [idSystemObject])
  WorkflowStep                   WorkflowStep @relation(fields: [idWorkflowStep], references: [idWorkflowStep])

  @@index([idSystemObject, Input], name: "WorkflowStepSystemObjectXref_idSystemObject_Input")
  @@index([idWorkflowStep, Input], name: "WorkflowStepSystemObjectXref_idWorkflowStep_Input")
}

model WorkflowTemplate {
  idWorkflowTemplate Int        @default(autoincrement()) @id
  Name               String
  Workflow           Workflow[]
}