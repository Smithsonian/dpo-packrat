generator client {
  provider      = "prisma-client-js"
  output        = "../../../node_modules/@prisma/client"
  binaryTargets = ["native", "linux-musl"]
}

datasource mariasql {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model AccessAction {
  idAccessAction             Int                          @default(autoincrement()) @id
  Name                       String
  SortOrder                  Int
  AccessRoleAccessActionXref AccessRoleAccessActionXref[]

  @@index([SortOrder], name: "AccessAction_SortOrder")
}

model AccessContext {
  idAccessContext     Int                   @default(autoincrement()) @id
  Global              Boolean
  Authoritative       Boolean
  CaptureData         Boolean
  Model               Boolean
  Scene               Boolean
  IntermediaryFile    Boolean
  AccessContextObject AccessContextObject[]
  AccessPolicy        AccessPolicy[]
}

model AccessContextObject {
  idAccessContextObject Int           @default(autoincrement()) @id
  idAccessContext       Int
  idSystemObject        Int
  AccessContext         AccessContext @relation(fields: [idAccessContext], references: [idAccessContext])
  SystemObject          SystemObject  @relation(fields: [idSystemObject], references: [idSystemObject])

  @@index([idAccessContext], name: "AccessContextObject_idAccessContext")
  @@index([idSystemObject], name: "AccessContextObject_idSystemObject")
}

model AccessPolicy {
  idAccessPolicy  Int           @default(autoincrement()) @id
  idUser          Int
  idAccessRole    Int
  idAccessContext Int
  AccessContext   AccessContext @relation(fields: [idAccessContext], references: [idAccessContext])
  AccessRole      AccessRole    @relation(fields: [idAccessRole], references: [idAccessRole])
  User            User          @relation(fields: [idUser], references: [idUser])

  @@index([idAccessContext], name: "AccessPolicy_idAccessContext")
  @@index([idAccessRole], name: "AccessPolicy_idAccessRole")
  @@index([idUser], name: "AccessPolicy_idUser")
}

model AccessRole {
  idAccessRole               Int                          @default(autoincrement()) @id
  Name                       String
  AccessPolicy               AccessPolicy[]
  AccessRoleAccessActionXref AccessRoleAccessActionXref[]
}

model AccessRoleAccessActionXref {
  idAccessRoleAccessActionXref Int          @default(autoincrement()) @id
  idAccessRole                 Int
  idAccessAction               Int
  AccessAction                 AccessAction @relation(fields: [idAccessAction], references: [idAccessAction])
  AccessRole                   AccessRole   @relation(fields: [idAccessRole], references: [idAccessRole])

  @@index([idAccessAction], name: "AccessRoleAccessActionXref_idAccessAction")
  @@index([idAccessRole], name: "AccessRoleAccessActionXref_idAccessRole")
}

model Actor {
  idActor               Int                     @default(autoincrement()) @id
  IndividualName        String?
  OrganizationName      String?
  idUnit                Int?
  Unit                  Unit?                   @relation(fields: [idUnit], references: [idUnit])
  ModelProcessingAction ModelProcessingAction[]
  SystemObject          SystemObject?

  @@index([idUnit], name: "fk_actor_unit_1")
}

model Asset {
  idAsset                                         Int                  @default(autoincrement()) @id
  FileName                                        String
  FilePath                                        String
  idAssetGroup                                    Int?
  idVAssetType                                    Int
  idSystemObject                                  Int?
  StorageKey                                      String?              @unique
  AssetGroup                                      AssetGroup?          @relation(fields: [idAssetGroup], references: [idAssetGroup])
  SystemObject_Asset_idSystemObjectToSystemObject SystemObject?        @relation("Asset_idSystemObjectToSystemObject", fields: [idSystemObject], references: [idSystemObject])
  Vocabulary                                      Vocabulary           @relation(fields: [idVAssetType], references: [idVocabulary])
  AssetVersion                                    AssetVersion[]
  CaptureData                                     CaptureData[]
  CaptureDataFile                                 CaptureDataFile[]
  IntermediaryFile                                IntermediaryFile[]
  Item                                            Item[]
  Metadata                                        Metadata[]
  Model                                           Model[]
  ModelMaterialUVMap                              ModelMaterialUVMap[]
  Scene                                           Scene[]
  Subject                                         Subject[]
  SystemObject_AssetToSystemObject_idAsset        SystemObject?        @relation("AssetToSystemObject_idAsset")

  @@index([idAssetGroup], name: "Asset_idAssetGroup")
  @@index([idSystemObject], name: "fk_asset_systemobject1")
  @@index([idVAssetType], name: "fk_asset_vocabulary1")
}

model AssetGroup {
  idAssetGroup Int     @default(autoincrement()) @id
  Asset        Asset[]
}

model AssetVersion {
  idAssetVersion    Int           @default(autoincrement()) @id
  idAsset           Int
  Version           Int
  FileName          String
  idUserCreator     Int
  DateCreated       DateTime
  StorageHash       String
  StorageSize       Int           @default(0)
  StorageKeyStaging String
  Ingested          Boolean
  BulkIngest        Boolean
  Asset             Asset         @relation(fields: [idAsset], references: [idAsset])
  User              User          @relation(fields: [idUserCreator], references: [idUser])
  SystemObject      SystemObject?

  @@index([Ingested, idUserCreator], name: "AssetVersion_Ingested_idUserCreator")
  @@index([StorageHash], name: "AssetVersion_StorageHash")
  @@index([StorageKeyStaging], name: "AssetVersion_StorageKeyStaging")
  @@index([idAsset, Version], name: "AssetVersion_idAsset_Version")
  @@index([idUserCreator, Ingested], name: "AssetVersion_idUserCreator_Ingested")
}

model CaptureData {
  idCaptureData                   Int                               @default(autoincrement()) @id
  Name                            String
  idVCaptureMethod                Int
  DateCaptured                    DateTime
  Description                     String
  idAssetThumbnail                Int?
  Asset                           Asset?                            @relation(fields: [idAssetThumbnail], references: [idAsset])
  Vocabulary                      Vocabulary                        @relation(fields: [idVCaptureMethod], references: [idVocabulary])
  CaptureDataFile                 CaptureDataFile[]
  CaptureDataGroupCaptureDataXref CaptureDataGroupCaptureDataXref[]
  CaptureDataPhoto                CaptureDataPhoto[]
  SystemObject                    SystemObject?

  @@index([idAssetThumbnail], name: "fk_capturedata_asset1")
  @@index([idVCaptureMethod], name: "fk_capturedata_vocabulary1")
}

model CaptureDataFile {
  idCaptureDataFile       Int         @default(autoincrement()) @id
  idCaptureData           Int
  idAsset                 Int
  idVVariantType          Int
  CompressedMultipleFiles Boolean
  Asset                   Asset       @relation(fields: [idAsset], references: [idAsset])
  CaptureData             CaptureData @relation(fields: [idCaptureData], references: [idCaptureData])
  Vocabulary              Vocabulary  @relation(fields: [idVVariantType], references: [idVocabulary])

  @@index([idAsset], name: "CaptureDataFile_idAsset")
  @@index([idCaptureData], name: "CaptureDataFile_idCaptureData")
  @@index([idVVariantType], name: "fk_capturedatafile_vocabulary1")
}

model CaptureDataGroup {
  idCaptureDataGroup              Int                               @default(autoincrement()) @id
  CaptureDataGroupCaptureDataXref CaptureDataGroupCaptureDataXref[]
}

model CaptureDataGroupCaptureDataXref {
  idCaptureDataGroupCaptureDataXref Int              @default(autoincrement()) @id
  idCaptureDataGroup                Int
  idCaptureData                     Int
  CaptureData                       CaptureData      @relation(fields: [idCaptureData], references: [idCaptureData])
  CaptureDataGroup                  CaptureDataGroup @relation(fields: [idCaptureDataGroup], references: [idCaptureDataGroup])

  @@index([idCaptureData], name: "CaptureDataGroupCaptureDataXref_idCaptureData")
  @@index([idCaptureDataGroup], name: "CaptureDataGroupCaptureDataXref_idCaptureDataGroup")
}

model CaptureDataPhoto {
  idCaptureDataPhoto                                                 Int         @default(autoincrement()) @id
  idCaptureData                                                      Int
  idVCaptureDatasetType                                              Int
  CaptureDatasetFieldID                                              Int?
  idVItemPositionType                                                Int?
  ItemPositionFieldID                                                Int?
  ItemArrangementFieldID                                             Int?
  idVFocusType                                                       Int?
  idVLightSourceType                                                 Int?
  idVBackgroundRemovalMethod                                         Int?
  idVClusterType                                                     Int?
  ClusterGeometryFieldID                                             Int?
  CameraSettingsUniform                                              Boolean?
  CaptureData                                                        CaptureData @relation(fields: [idCaptureData], references: [idCaptureData])
  Vocabulary_CaptureDataPhoto_idVBackgroundRemovalMethodToVocabulary Vocabulary? @relation("CaptureDataPhoto_idVBackgroundRemovalMethodToVocabulary", fields: [idVBackgroundRemovalMethod], references: [idVocabulary])
  Vocabulary_CaptureDataPhoto_idVCaptureDatasetTypeToVocabulary      Vocabulary  @relation("CaptureDataPhoto_idVCaptureDatasetTypeToVocabulary", fields: [idVCaptureDatasetType], references: [idVocabulary])
  Vocabulary_CaptureDataPhoto_idVClusterTypeToVocabulary             Vocabulary? @relation("CaptureDataPhoto_idVClusterTypeToVocabulary", fields: [idVClusterType], references: [idVocabulary])
  Vocabulary_CaptureDataPhoto_idVFocusTypeToVocabulary               Vocabulary? @relation("CaptureDataPhoto_idVFocusTypeToVocabulary", fields: [idVFocusType], references: [idVocabulary])
  Vocabulary_CaptureDataPhoto_idVItemPositionTypeToVocabulary        Vocabulary? @relation("CaptureDataPhoto_idVItemPositionTypeToVocabulary", fields: [idVItemPositionType], references: [idVocabulary])
  Vocabulary_CaptureDataPhoto_idVLightSourceTypeToVocabulary         Vocabulary? @relation("CaptureDataPhoto_idVLightSourceTypeToVocabulary", fields: [idVLightSourceType], references: [idVocabulary])

  @@index([idCaptureData], name: "fk_capturedataphoto_capturedata1")
  @@index([idVCaptureDatasetType], name: "fk_capturedataphoto_vocabulary1")
  @@index([idVItemPositionType], name: "fk_capturedataphoto_vocabulary2")
  @@index([idVFocusType], name: "fk_capturedataphoto_vocabulary3")
  @@index([idVLightSourceType], name: "fk_capturedataphoto_vocabulary4")
  @@index([idVBackgroundRemovalMethod], name: "fk_capturedataphoto_vocabulary5")
  @@index([idVClusterType], name: "fk_capturedataphoto_vocabulary6")
}

model GeoLocation {
  idGeoLocation Int       @default(autoincrement()) @id
  Latitude      Float?
  Longitude     Float?
  Altitude      Float?
  TS0           Float?
  TS1           Float?
  TS2           Float?
  R0            Float?
  R1            Float?
  R2            Float?
  R3            Float?
  Item          Item[]
  Subject       Subject[]
}

model Identifier {
  idIdentifier      Int           @default(autoincrement()) @id
  IdentifierValue   String
  idVIdentifierType Int
  idSystemObject    Int?
  SystemObject      SystemObject? @relation(fields: [idSystemObject], references: [idSystemObject])
  Vocabulary        Vocabulary    @relation(fields: [idVIdentifierType], references: [idVocabulary])
  Subject           Subject[]

  @@index([IdentifierValue], name: "Identifier_IdentifierValue")
  @@index([idSystemObject, idVIdentifierType], name: "Identifier_idSystemObject_idVIdentifierType")
  @@index([idVIdentifierType, IdentifierValue], name: "Identifier_idVIdentifierType_IdentifierValue")
}

model IntermediaryFile {
  idIntermediaryFile Int           @default(autoincrement()) @id
  idAsset            Int
  DateCreated        DateTime
  Asset              Asset         @relation(fields: [idAsset], references: [idAsset])
  SystemObject       SystemObject?

  @@index([idAsset], name: "fk_intermediaryfile_asset1")
}

model Item {
  idItem           Int           @default(autoincrement()) @id
  idAssetThumbnail Int?
  idGeoLocation    Int?
  Name             String
  EntireSubject    Boolean
  Asset            Asset?        @relation(fields: [idAssetThumbnail], references: [idAsset])
  GeoLocation      GeoLocation?  @relation(fields: [idGeoLocation], references: [idGeoLocation])
  SystemObject     SystemObject?

  @@index([idAssetThumbnail], name: "fk_item_asset1")
  @@index([idGeoLocation], name: "fk_item_geolocation1")
}

model Job {
  idJob   Int       @default(autoincrement()) @id
  Name    String
  JobTask JobTask[]
}

model JobTask {
  idJobTask   Int           @default(autoincrement()) @id
  idJob       Int
  idVJobType  Int
  State       String?
  Step        String?
  Error       String?
  Parameters  String?
  Report      String?
  Job         Job           @relation(fields: [idJob], references: [idJob])
  Vocabulary  Vocabulary    @relation(fields: [idVJobType], references: [idVocabulary])
  JobTaskCook JobTaskCook[]

  @@index([idJob], name: "JobTask_idJob")
  @@index([idVJobType, idJob], name: "JobTask_idVJobType_idJob")
}

model JobTaskCook {
  idJobTaskCook Int     @default(autoincrement()) @id
  idJobTask     Int
  JobID         String
  RecipeID      String
  JobTask       JobTask @relation(fields: [idJobTask], references: [idJobTask])

  @@index([JobID], name: "JobTaskCook_JobID")
  @@index([idJobTask], name: "JobTaskCook_idJobTask")
}

model License {
  idLicense         Int                 @default(autoincrement()) @id
  Name              String
  Description       String
  LicenseAssignment LicenseAssignment[]
}

model LicenseAssignment {
  idLicenseAssignment Int           @default(autoincrement()) @id
  idLicense           Int
  idUserCreator       Int?
  DateStart           DateTime?
  DateEnd             DateTime?
  idSystemObject      Int?
  License             License       @relation(fields: [idLicense], references: [idLicense])
  SystemObject        SystemObject? @relation(fields: [idSystemObject], references: [idSystemObject])
  User                User?         @relation(fields: [idUserCreator], references: [idUser])

  @@index([idSystemObject], name: "LicenseAssignment_idSystemObject")
  @@index([idLicense], name: "fk_licenseassignment_license1")
  @@index([idUserCreator], name: "fk_licenseassignment_user1")
}

model Metadata {
  idMetadata        Int           @default(autoincrement()) @id
  Name              String
  ValueShort        String?
  ValueExtended     String?
  idAssetValue      Int?
  idUser            Int?
  idVMetadataSource Int?
  idSystemObject    Int?
  Asset             Asset?        @relation(fields: [idAssetValue], references: [idAsset])
  SystemObject      SystemObject? @relation(fields: [idSystemObject], references: [idSystemObject])
  User              User?         @relation(fields: [idUser], references: [idUser])
  Vocabulary        Vocabulary?   @relation(fields: [idVMetadataSource], references: [idVocabulary])

  @@index([Name, ValueShort], name: "Metadata_Name_ValueShort")
  @@index([idAssetValue], name: "Metadata_idAssetValue")
  @@index([idSystemObject], name: "Metadata_idSystemObject")
  @@index([idUser], name: "fk_metadata_user1")
  @@index([idVMetadataSource], name: "fk_metadata_vocabulary1")
}

model Model {
  idModel                                        Int                     @default(autoincrement()) @id
  Name                                           String
  DateCreated                                    DateTime
  Master                                         Boolean
  Authoritative                                  Boolean
  idVCreationMethod                              Int
  idVModality                                    Int
  idVUnits                                       Int
  idVPurpose                                     Int
  idVFileType                                    Int
  idAssetThumbnail                               Int?
  idModelMetrics                                 Int?
  Asset                                          Asset?                  @relation(fields: [idAssetThumbnail], references: [idAsset])
  ModelMetrics                                   ModelMetrics?           @relation(fields: [idModelMetrics], references: [idModelMetrics])
  Vocabulary_Model_idVCreationMethodToVocabulary Vocabulary              @relation("Model_idVCreationMethodToVocabulary", fields: [idVCreationMethod], references: [idVocabulary])
  Vocabulary_Model_idVFileTypeToVocabulary       Vocabulary              @relation("Model_idVFileTypeToVocabulary", fields: [idVFileType], references: [idVocabulary])
  Vocabulary_Model_idVModalityToVocabulary       Vocabulary              @relation("Model_idVModalityToVocabulary", fields: [idVModality], references: [idVocabulary])
  Vocabulary_Model_idVPurposeToVocabulary        Vocabulary              @relation("Model_idVPurposeToVocabulary", fields: [idVPurpose], references: [idVocabulary])
  Vocabulary_Model_idVUnitsToVocabulary          Vocabulary              @relation("Model_idVUnitsToVocabulary", fields: [idVUnits], references: [idVocabulary])
  ModelMaterialUVMap                             ModelMaterialUVMap[]
  ModelObject                                    ModelObject[]
  ModelProcessingAction                          ModelProcessingAction[]
  ModelSceneXref                                 ModelSceneXref[]
  SystemObject                                   SystemObject?

  @@index([idAssetThumbnail], name: "fk_model_asset1")
  @@index([idModelMetrics], name: "fk_model_modelmetrics1")
  @@index([idVCreationMethod], name: "fk_model_vocabulary1")
  @@index([idVModality], name: "fk_model_vocabulary2")
  @@index([idVUnits], name: "fk_model_vocabulary3")
  @@index([idVPurpose], name: "fk_model_vocabulary4")
  @@index([idVFileType], name: "fk_model_vocabulary5")
}

model ModelMaterial {
  idModelMaterial      Int                    @default(autoincrement()) @id
  idModelObject        Int
  Name                 String?
  ModelObject          ModelObject            @relation(fields: [idModelObject], references: [idModelObject])
  ModelMaterialChannel ModelMaterialChannel[]

  @@index([idModelObject], name: "Model_idModelObject")
}

model ModelMaterialChannel {
  idModelMaterialChannel Int                 @default(autoincrement()) @id
  idModelMaterial        Int
  idVMaterialType        Int?
  MaterialTypeOther      String?
  idModelMaterialUVMap   Int?
  ChannelPosition        Int?
  ChannelWidth           Int?
  Scalar1                Float?
  Scalar2                Float?
  Scalar3                Float?
  Scalar4                Float?
  ModelMaterial          ModelMaterial       @relation(fields: [idModelMaterial], references: [idModelMaterial])
  ModelMaterialUVMap     ModelMaterialUVMap? @relation(fields: [idModelMaterialUVMap], references: [idModelMaterialUVMap])
  Vocabulary             Vocabulary?         @relation(fields: [idVMaterialType], references: [idVocabulary])

  @@index([idModelMaterial], name: "ModelMaterialChannel_idModelMaterial")
  @@index([idModelMaterialUVMap], name: "fk_modelmaterialchannel_modelmaterialuvmap1")
  @@index([idVMaterialType], name: "fk_modelmaterialchannel_vocabulary1")
}

model ModelMaterialUVMap {
  idModelMaterialUVMap Int                    @default(autoincrement()) @id
  idModel              Int
  idAsset              Int
  UVMapEdgeLength      Int
  Asset                Asset                  @relation(fields: [idAsset], references: [idAsset])
  Model                Model                  @relation(fields: [idModel], references: [idModel])
  ModelMaterialChannel ModelMaterialChannel[]

  @@index([idAsset], name: "ModelUVMapFile_idAsset")
  @@index([idModel], name: "ModelUVMapFile_idModel")
}

model ModelMetrics {
  idModelMetrics               Int           @default(autoincrement()) @id
  BoundingBoxP1X               Float?
  BoundingBoxP1Y               Float?
  BoundingBoxP1Z               Float?
  BoundingBoxP2X               Float?
  BoundingBoxP2Y               Float?
  BoundingBoxP2Z               Float?
  CountPoint                   Int?
  CountFace                    Int?
  CountColorChannel            Int?
  CountTextureCoorinateChannel Int?
  HasBones                     Boolean?
  HasFaceNormals               Boolean?
  HasTangents                  Boolean?
  HasTextureCoordinates        Boolean?
  HasVertexNormals             Boolean?
  HasVertexColor               Boolean?
  IsManifold                   Boolean?
  IsWatertight                 Boolean?
  Model                        Model[]
  ModelObject                  ModelObject[]
}

model ModelObject {
  idModelObject  Int             @default(autoincrement()) @id
  idModel        Int
  idModelMetrics Int?
  Model          Model           @relation(fields: [idModel], references: [idModel])
  ModelMetrics   ModelMetrics?   @relation(fields: [idModelMetrics], references: [idModelMetrics])
  ModelMaterial  ModelMaterial[]

  @@index([idModel], name: "ModelObject_idModel")
  @@index([idModelMetrics], name: "fk_modelobject_modelmetrics1")
}

model ModelProcessingAction {
  idModelProcessingAction   Int                         @default(autoincrement()) @id
  idModel                   Int
  idActor                   Int
  DateProcessed             DateTime
  ToolsUsed                 String
  Description               String
  Actor                     Actor                       @relation(fields: [idActor], references: [idActor])
  Model                     Model                       @relation(fields: [idModel], references: [idModel])
  ModelProcessingActionStep ModelProcessingActionStep[]

  @@index([idActor], name: "ModelProcessingAction_idActor")
  @@index([idModel], name: "ModelProcessingAction_idModel")
}

model ModelProcessingActionStep {
  idModelProcessingActionStep Int                   @default(autoincrement()) @id
  idModelProcessingAction     Int
  idVActionMethod             Int
  Description                 String
  ModelProcessingAction       ModelProcessingAction @relation(fields: [idModelProcessingAction], references: [idModelProcessingAction])
  Vocabulary                  Vocabulary            @relation(fields: [idVActionMethod], references: [idVocabulary])

  @@index([idModelProcessingAction], name: "fk_modelprocessingactionstep_modelprocessingaction1")
  @@index([idVActionMethod], name: "fk_modelprocessingactionstep_vocabulary1")
}

model ModelSceneXref {
  idModelSceneXref Int    @default(autoincrement()) @id
  idModel          Int
  idScene          Int
  TS0              Float?
  TS1              Float?
  TS2              Float?
  R0               Float?
  R1               Float?
  R2               Float?
  R3               Float?
  Model            Model  @relation(fields: [idModel], references: [idModel])
  Scene            Scene  @relation(fields: [idScene], references: [idScene])

  @@index([idModel], name: "ModelSceneXref_idModel")
  @@index([idScene], name: "ModelSceneXref_idScene")
}

model Project {
  idProject            Int                    @default(autoincrement()) @id
  Name                 String
  Description          String?
  ProjectDocumentation ProjectDocumentation[]
  SystemObject         SystemObject?
  Workflow             Workflow[]
}

model ProjectDocumentation {
  idProjectDocumentation Int           @default(autoincrement()) @id
  idProject              Int
  Name                   String
  Description            String
  Project                Project       @relation(fields: [idProject], references: [idProject])
  SystemObject           SystemObject?

  @@index([idProject], name: "fk_projectdocumentation_project1")
}

model Scene {
  idScene          Int              @default(autoincrement()) @id
  Name             String
  idAssetThumbnail Int?
  IsOriented       Boolean
  HasBeenQCd       Boolean
  Asset            Asset?           @relation(fields: [idAssetThumbnail], references: [idAsset])
  ModelSceneXref   ModelSceneXref[]
  SystemObject     SystemObject?

  @@index([idAssetThumbnail], name: "fk_scene_asset1")
}

model Stakeholder {
  idStakeholder     Int           @default(autoincrement()) @id
  IndividualName    String
  OrganizationName  String
  EmailAddress      String?
  PhoneNumberMobile String?
  PhoneNumberOffice String?
  MailingAddress    String?
  SystemObject      SystemObject?
}

model Subject {
  idSubject             Int           @default(autoincrement()) @id
  idUnit                Int
  idAssetThumbnail      Int?
  idGeoLocation         Int?
  Name                  String
  idIdentifierPreferred Int?
  Asset                 Asset?        @relation(fields: [idAssetThumbnail], references: [idAsset])
  GeoLocation           GeoLocation?  @relation(fields: [idGeoLocation], references: [idGeoLocation])
  Identifier            Identifier?   @relation(fields: [idIdentifierPreferred], references: [idIdentifier])
  Unit                  Unit          @relation(fields: [idUnit], references: [idUnit])
  SystemObject          SystemObject?

  @@index([idAssetThumbnail], name: "fk_subject_asset1")
  @@index([idGeoLocation], name: "fk_subject_geolocation1")
  @@index([idIdentifierPreferred], name: "fk_subject_identifier1")
  @@index([idUnit], name: "fk_subject_unit1")
}

model SystemObject {
  idSystemObject                                                        Int                               @default(autoincrement()) @id
  idUnit                                                                Int?                              @unique
  idProject                                                             Int?                              @unique
  idSubject                                                             Int?                              @unique
  idItem                                                                Int?                              @unique
  idCaptureData                                                         Int?                              @unique
  idModel                                                               Int?                              @unique
  idScene                                                               Int?                              @unique
  idIntermediaryFile                                                    Int?                              @unique
  idAsset                                                               Int?                              @unique
  idAssetVersion                                                        Int?                              @unique
  idProjectDocumentation                                                Int?                              @unique
  idActor                                                               Int?                              @unique
  idStakeholder                                                         Int?                              @unique
  Retired                                                               Boolean
  Actor                                                                 Actor?                            @relation(fields: [idActor], references: [idActor])
  Asset_AssetToSystemObject_idAsset                                     Asset?                            @relation("AssetToSystemObject_idAsset", fields: [idAsset], references: [idAsset])
  AssetVersion                                                          AssetVersion?                     @relation(fields: [idAssetVersion], references: [idAssetVersion])
  CaptureData                                                           CaptureData?                      @relation(fields: [idCaptureData], references: [idCaptureData])
  IntermediaryFile                                                      IntermediaryFile?                 @relation(fields: [idIntermediaryFile], references: [idIntermediaryFile])
  Item                                                                  Item?                             @relation(fields: [idItem], references: [idItem])
  Model                                                                 Model?                            @relation(fields: [idModel], references: [idModel])
  Project                                                               Project?                          @relation(fields: [idProject], references: [idProject])
  ProjectDocumentation                                                  ProjectDocumentation?             @relation(fields: [idProjectDocumentation], references: [idProjectDocumentation])
  Scene                                                                 Scene?                            @relation(fields: [idScene], references: [idScene])
  Stakeholder                                                           Stakeholder?                      @relation(fields: [idStakeholder], references: [idStakeholder])
  Subject                                                               Subject?                          @relation(fields: [idSubject], references: [idSubject])
  Unit                                                                  Unit?                             @relation(fields: [idUnit], references: [idUnit])
  AccessContextObject                                                   AccessContextObject[]
  Asset_Asset_idSystemObjectToSystemObject                              Asset[]                           @relation("Asset_idSystemObjectToSystemObject")
  Identifier                                                            Identifier[]
  LicenseAssignment                                                     LicenseAssignment[]
  Metadata                                                              Metadata[]
  SystemObjectVersion                                                   SystemObjectVersion[]
  SystemObjectXref_SystemObjectToSystemObjectXref_idSystemObjectDerived SystemObjectXref[]                @relation("SystemObjectToSystemObjectXref_idSystemObjectDerived")
  SystemObjectXref_SystemObjectToSystemObjectXref_idSystemObjectMaster  SystemObjectXref[]                @relation("SystemObjectToSystemObjectXref_idSystemObjectMaster")
  UserPersonalizationSystemObject                                       UserPersonalizationSystemObject[]
  WorkflowStepSystemObjectXref                                          WorkflowStepSystemObjectXref[]

  @@index([idActor], name: "SystemObject_idActor")
  @@index([idAsset], name: "SystemObject_idAsset")
  @@index([idAssetVersion], name: "SystemObject_idAssetVersion")
  @@index([idCaptureData], name: "SystemObject_idCaptureData")
  @@index([idIntermediaryFile], name: "SystemObject_idIntermediaryFile")
  @@index([idItem], name: "SystemObject_idItem")
  @@index([idModel], name: "SystemObject_idModel")
  @@index([idProject], name: "SystemObject_idProject")
  @@index([idProjectDocumentation], name: "SystemObject_idProjectDocumentation")
  @@index([idScene], name: "SystemObject_idScene")
  @@index([idStakeholder], name: "SystemObject_idStakeholder")
  @@index([idSubject], name: "SystemObject_idSubject")
  @@index([idUnit], name: "SystemObject_idUnit")
}

model SystemObjectVersion {
  idSystemObjectVersion Int          @default(autoincrement()) @id
  idSystemObject        Int
  PublishedState        Int
  SystemObject          SystemObject @relation(fields: [idSystemObject], references: [idSystemObject])

  @@index([idSystemObject, idSystemObjectVersion], name: "ObjectVersion_idSystemObject_idObjectVersion")
}

model SystemObjectXref {
  idSystemObjectXref                                                Int          @default(autoincrement()) @id
  idSystemObjectMaster                                              Int
  idSystemObjectDerived                                             Int
  SystemObject_SystemObjectToSystemObjectXref_idSystemObjectDerived SystemObject @relation("SystemObjectToSystemObjectXref_idSystemObjectDerived", fields: [idSystemObjectDerived], references: [idSystemObject])
  SystemObject_SystemObjectToSystemObjectXref_idSystemObjectMaster  SystemObject @relation("SystemObjectToSystemObjectXref_idSystemObjectMaster", fields: [idSystemObjectMaster], references: [idSystemObject])

  @@index([idSystemObjectDerived], name: "SystemObjectXref_idSystemObjectDerived")
  @@index([idSystemObjectMaster], name: "SystemObjectXref_idSystemObjectMaster")
}

model Unit {
  idUnit       Int           @default(autoincrement()) @id
  Name         String
  Abbreviation String?
  ARKPrefix    String?
  Actor        Actor[]
  Subject      Subject[]
  SystemObject SystemObject?
  UnitEdan     UnitEdan[]
}

model UnitEdan {
  idUnitEdan   Int    @default(autoincrement()) @id
  idUnit       Int?
  Abbreviation String @unique
  Unit         Unit?  @relation(fields: [idUnit], references: [idUnit])

  @@index([Abbreviation], name: "UnitEdan_Abbreviation")
  @@index([idUnit], name: "fk_unitedan_idunit")
}

model User {
  idUser                          Int                               @default(autoincrement()) @id
  Name                            String
  EmailAddress                    String
  SecurityID                      String
  Active                          Boolean
  DateActivated                   DateTime
  DateDisabled                    DateTime?
  WorkflowNotificationTime        DateTime?
  EmailSettings                   Int?
  AccessPolicy                    AccessPolicy[]
  AssetVersion                    AssetVersion[]
  LicenseAssignment               LicenseAssignment[]
  Metadata                        Metadata[]
  UserPersonalizationSystemObject UserPersonalizationSystemObject[]
  UserPersonalizationUrl          UserPersonalizationUrl[]
  Workflow                        Workflow[]
  WorkflowStep                    WorkflowStep[]

  @@index([EmailAddress], name: "user_EmailAddress")
}

model UserPersonalizationSystemObject {
  idUserPersonalizationSystemObject Int          @default(autoincrement()) @id
  idUser                            Int
  idSystemObject                    Int
  Personalization                   String?
  SystemObject                      SystemObject @relation(fields: [idSystemObject], references: [idSystemObject])
  User                              User         @relation(fields: [idUser], references: [idUser])

  @@index([idUser], name: "UserPersonalizationObject_idUser")
  @@index([idUser, idSystemObject], name: "UserPersonalizationObject_idUser_idSystemObject")
  @@index([idSystemObject], name: "fk_userpersonalizationsystemobject_systemobject1")
}

model UserPersonalizationUrl {
  idUserPersonalizationUrl Int    @default(autoincrement()) @id
  idUser                   Int
  URL                      String
  Personalization          String
  User                     User   @relation(fields: [idUser], references: [idUser])

  @@index([idUser, URL], name: "UserPersonalizationUrl_idUser_URL")
}

model Vocabulary {
  idVocabulary                                                             Int                         @default(autoincrement()) @id
  idVocabularySet                                                          Int
  SortOrder                                                                Int
  Term                                                                     String
  VocabularySet                                                            VocabularySet               @relation(fields: [idVocabularySet], references: [idVocabularySet])
  Asset                                                                    Asset[]
  CaptureData                                                              CaptureData[]
  CaptureDataFile                                                          CaptureDataFile[]
  CaptureDataPhoto_CaptureDataPhoto_idVBackgroundRemovalMethodToVocabulary CaptureDataPhoto[]          @relation("CaptureDataPhoto_idVBackgroundRemovalMethodToVocabulary")
  CaptureDataPhoto_CaptureDataPhoto_idVCaptureDatasetTypeToVocabulary      CaptureDataPhoto[]          @relation("CaptureDataPhoto_idVCaptureDatasetTypeToVocabulary")
  CaptureDataPhoto_CaptureDataPhoto_idVClusterTypeToVocabulary             CaptureDataPhoto[]          @relation("CaptureDataPhoto_idVClusterTypeToVocabulary")
  CaptureDataPhoto_CaptureDataPhoto_idVFocusTypeToVocabulary               CaptureDataPhoto[]          @relation("CaptureDataPhoto_idVFocusTypeToVocabulary")
  CaptureDataPhoto_CaptureDataPhoto_idVItemPositionTypeToVocabulary        CaptureDataPhoto[]          @relation("CaptureDataPhoto_idVItemPositionTypeToVocabulary")
  CaptureDataPhoto_CaptureDataPhoto_idVLightSourceTypeToVocabulary         CaptureDataPhoto[]          @relation("CaptureDataPhoto_idVLightSourceTypeToVocabulary")
  Identifier                                                               Identifier[]
  JobTask                                                                  JobTask[]
  Metadata                                                                 Metadata[]
  Model_Model_idVCreationMethodToVocabulary                                Model[]                     @relation("Model_idVCreationMethodToVocabulary")
  Model_Model_idVFileTypeToVocabulary                                      Model[]                     @relation("Model_idVFileTypeToVocabulary")
  Model_Model_idVModalityToVocabulary                                      Model[]                     @relation("Model_idVModalityToVocabulary")
  Model_Model_idVPurposeToVocabulary                                       Model[]                     @relation("Model_idVPurposeToVocabulary")
  Model_Model_idVUnitsToVocabulary                                         Model[]                     @relation("Model_idVUnitsToVocabulary")
  ModelMaterialChannel                                                     ModelMaterialChannel[]
  ModelProcessingActionStep                                                ModelProcessingActionStep[]
  WorkflowStep                                                             WorkflowStep[]

  @@index([idVocabularySet, SortOrder], name: "Vocabulary_idVocabulySet_SortOrder")
}

model VocabularySet {
  idVocabularySet  Int          @default(autoincrement()) @id
  Name             String
  SystemMaintained Boolean
  Vocabulary       Vocabulary[]
}

model Workflow {
  idWorkflow         Int              @default(autoincrement()) @id
  idWorkflowTemplate Int
  idProject          Int?
  idUserInitiator    Int?
  DateInitiated      DateTime
  DateUpdated        DateTime
  Project            Project?         @relation(fields: [idProject], references: [idProject])
  User               User?            @relation(fields: [idUserInitiator], references: [idUser])
  WorkflowTemplate   WorkflowTemplate @relation(fields: [idWorkflowTemplate], references: [idWorkflowTemplate])
  WorkflowStep       WorkflowStep[]

  @@index([idProject], name: "Workflow_idProject")
  @@index([idUserInitiator], name: "Workflow_idUserInitiator")
  @@index([idWorkflowTemplate], name: "fk_workflow_workflowtemplate1")
}

model WorkflowStep {
  idWorkflowStep               Int                            @default(autoincrement()) @id
  idWorkflow                   Int
  idUserOwner                  Int
  idVWorkflowStepType          Int
  State                        Int
  DateCreated                  DateTime
  DateCompleted                DateTime?
  User                         User                           @relation(fields: [idUserOwner], references: [idUser])
  Vocabulary                   Vocabulary                     @relation(fields: [idVWorkflowStepType], references: [idVocabulary])
  Workflow                     Workflow                       @relation(fields: [idWorkflow], references: [idWorkflow])
  WorkflowStepSystemObjectXref WorkflowStepSystemObjectXref[]

  @@index([State, idWorkflow], name: "WorkflowStep_State_idWorkflow")
  @@index([idUserOwner], name: "WorkflowStep_idUserOwner")
  @@index([idWorkflow, DateCompleted], name: "WorkflowStep_idWorkflow_DateCompleted")
  @@index([idWorkflow, DateCreated], name: "WorkflowStep_idWorkflow_DateCreated")
  @@index([idVWorkflowStepType], name: "fk_workflowstep_vocabulary1")
}

model WorkflowStepSystemObjectXref {
  idWorkflowStepSystemObjectXref Int          @default(autoincrement()) @id
  idWorkflowStep                 Int
  idSystemObject                 Int
  Input                          Boolean
  SystemObject                   SystemObject @relation(fields: [idSystemObject], references: [idSystemObject])
  WorkflowStep                   WorkflowStep @relation(fields: [idWorkflowStep], references: [idWorkflowStep])

  @@index([idSystemObject, Input], name: "WorkflowStepSystemObjectXref_idSystemObject_Input")
  @@index([idWorkflowStep, Input], name: "WorkflowStepSystemObjectXref_idWorkflowStep_Input")
}

model WorkflowTemplate {
  idWorkflowTemplate Int        @default(autoincrement()) @id
  Name               String
  Workflow           Workflow[]
}
